(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-257c0f03"],{"962b":function(t,a,e){},d259:function(t,a,e){e.r(a);var s=e("3951"),r=e("a5d4"),i=e("7dfd"),l=e("2f94"),s={name:"AddAddress",data(){return{formData:{isDefault:!1},ruleInline:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"change"}],detail:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码"},{pattern:i.mobile,trigger:"blur",message:"请输入正确的手机号"}]},loading:!1,mapMsg:{}}},methods:{save(){this.$refs.form.validate(t=>{if(t){let t=JSON.parse(JSON.stringify(this.formData));t.consigneeAddressPath=t.address.replace(/\s/g,","),delete t.address,this.loading=!0,(this.$route.query.id?Object(l.b)(t).then(t=>{t.success&&(this.loading=!1,this.$router.push("/home/MyAddress"))}):Object(l.f)(t).then(t=>{t.success&&(this.loading=!1,this.$router.push("/home/MyAddress"))})).catch(()=>{this.loading=!1})}})},getAddrById(t){Object(l.c)(t).then(t=>{var a;t.success&&((a=t.result).address=t.result.consigneeAddressPath.replace(/,/g," "),this.formData=a)})},getAddress(t){var a,e;"select"===t.type?(e=t.data.map(t=>t.name).join(","),a=t.data.map(t=>t.id).join(","),this.$set(this.formData,"address",e),this.$set(this.formData,"consigneeAddressIdPath",a),e=t.data[t.data.length-1].center.split(","),this.formData.lat=e[1],this.formData.lon=e[0]):(this.$set(this.formData,"address",t.data.addr),this.$set(this.formData,"consigneeAddressIdPath",t.data.addrId),this.$set(this.formData,"detail",t.data.address),this.formData.lat=t.data.position.lat,this.formData.lon=t.data.position.lng)}},mounted(){var t=this.$route.query.id;t&&this.getAddrById(t)},components:{card:s.a,multipleMap:r.a}},r=(e("e3d7"),e("2877")),e=Object(r.a)(s,function(){var a=this,t=a._self._c;return t("div",[t("card",{attrs:{_Title:"收货地址"}}),t("div",{staticClass:"add-box"},[t("Form",{ref:"form",attrs:{model:a.formData,"label-position":"left","label-width":100,rules:a.ruleInline}},[t("FormItem",{attrs:{label:"收件人",prop:"name"}},[t("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入收件人姓名"},model:{value:a.formData.name,callback:function(t){a.$set(a.formData,"name",t)},expression:"formData.name"}})],1),t("FormItem",{attrs:{label:"收件地区",prop:"address"}},[t("span",[a._v(a._s(a.formData.address||"暂无地址"))]),t("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",size:"small"},on:{click:function(t){return a.$refs.map.open()}}},[a._v("选择")])],1),t("FormItem",{attrs:{label:"详细地址",prop:"detail"}},[t("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入详细地址"},model:{value:a.formData.detail,callback:function(t){a.$set(a.formData,"detail",t)},expression:"formData.detail"}})],1),t("FormItem",{attrs:{label:"手机号码",prop:"mobile"}},[t("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入收件人手机号"},model:{value:a.formData.mobile,callback:function(t){a.$set(a.formData,"mobile",t)},expression:"formData.mobile"}})],1),t("FormItem",{attrs:{label:"地址别名"}},[t("i-input",{staticStyle:{width:"600px"},attrs:{length:"",maxlength:4,placeholder:"请输入地址别名，例如公司"},model:{value:a.formData.alias,callback:function(t){a.$set(a.formData,"alias",t)},expression:"formData.alias"}})],1),t("FormItem",{attrs:{label:"默认地址"}},[t("i-switch",{model:{value:a.formData.isDefault,callback:function(t){a.$set(a.formData,"isDefault",t)},expression:"formData.isDefault"}})],1)],1)],1),t("div",{staticClass:"mt_20"},[t("Button",{staticClass:"mr_10",attrs:{type:"primary",loading:a.loading},on:{click:a.save}},[a._v("保存收货地址")]),t("Button",{on:{click:function(t){return a.$router.back()}}},[a._v("返回")])],1),t("multipleMap",{ref:"map",on:{callback:a.getAddress}})],1)},[],!1,null,"1a348324",null);a.default=e.exports},e3d7:function(t,a,e){e("962b")}}]);