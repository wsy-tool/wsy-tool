(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-26d752f6"],{"0c19":function(e,t,s){},"723a":function(e,t,s){s("0c19")},7722:function(e,t,s){},"847c":function(e,t,s){},"84a9":function(e,t,s){s.d(t,"b",function(){return a}),s.d(t,"c",function(){return r}),s.d(t,"e",function(){return o}),s.d(t,"g",function(){return d}),s.d(t,"f",function(){return n}),s.d(t,"a",function(){return c}),s.d(t,"d",function(){return l}),s.d(t,"h",function(){return u});var i=s("ff66");function a(e){return Object(i.d)({url:"/buyer/store/store/apply/first",needToken:!0,method:i.a.PUT,params:e})}function r(e){return Object(i.d)({url:"/buyer/store/store/apply/second",needToken:!0,method:i.a.PUT,params:e})}function o(e){return Object(i.d)({url:"/buyer/store/store/apply/third",needToken:!0,method:i.a.PUT,params:e})}function d(e){return Object(i.d)({url:"/buyer/store/store/get/detail/"+e,needToken:!0,method:i.a.GET})}function n(e){return Object(i.d)({url:"/buyer/store/store/label/get/"+e,needToken:!0,method:i.a.GET})}function c(){return Object(i.d)({url:"/buyer/other/article/type/STORE_REGISTER",needToken:!0,method:i.a.GET})}function l(){return Object(i.d)({url:"/buyer/store/store/apply",needToken:!0,method:i.a.GET})}function u(e,t){return Object(i.d)({url:"/buyer/store/address/page/"+e,method:i.a.GET,params:t})}},"99cd":function(e,t,s){s("7722")},aff4:function(e,t,s){s.r(t);var i=s("2166"),a=s("7dfd"),r={name:"invoiceModal",data(){return{invoice:1,invoiceAvailable:!1,loading:!1,invoiceForm:{receiptTitle:"",taxpayerId:"",receiptContent:"商品明细"},type:1,ruleInline:{taxpayerId:[{required:!0,message:"请填写纳税人识别号"},{pattern:a.TINumber,message:"请填写正确的纳税人识别号"}]}}},props:["invoiceData"],watch:{invoiceData:{handler(e){this.invoiceForm={...e},e.taxpayerId?this.type=2:this.type=1},deep:!0,immeadite:!0}},methods:{changeInvoice(e){this.$nextTick(()=>{this.type=e})},save(){let t=!0;var e=JSON.parse(JSON.stringify(this.invoiceForm)).receiptTitle;return e?(2===this.type?this.$refs.form.validate(e=>{e||(t=!1)}):delete this.invoiceForm.taxpayerId,t):(this.$Message.error("请填写发票抬头!"),t=!1)},async submit(){var e;this.save()&&(this.loading=!0,e={way:this.$route.query.way,...this.invoiceForm},(await Object(i.i)(e)).success&&this.$emit("change",!0),this.loading=!1)}}},o=(s("99cd"),s("2877")),r=Object(o.a)(r,function(){var t=this,e=t._self._c;return e("div",{staticClass:"invoice-modal"},[e("Modal",{attrs:{width:"600","footer-hide":""},model:{value:t.invoiceAvailable,callback:function(e){t.invoiceAvailable=e},expression:"invoiceAvailable"}},[e("p",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("发票信息")])]),e("div",{staticClass:"nav-content"},[e("Form",{ref:"form",attrs:{model:t.invoiceForm,"label-position":"left",rules:t.ruleInline,"label-width":110}},[e("FormItem",{attrs:{label:"发票类型"}},[e("RadioGroup",{attrs:{type:"button","button-style":"solid"},model:{value:t.invoice,callback:function(e){t.invoice=e},expression:"invoice"}},[e("Radio",{attrs:{label:1},on:{"on-change":t.changeInvoice}},[t._v("电子普通发票")]),e("Radio",{attrs:{label:2,disabled:!0}},[t._v("增值税专用发票")])],1)],1),e("FormItem",{attrs:{label:"发票抬头"}},[e("RadioGroup",{attrs:{type:"button","button-style":"solid"},on:{"on-change":t.changeInvoice},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[e("Radio",{attrs:{label:1}},[t._v("个人")]),e("Radio",{attrs:{label:2}},[t._v("单位")])],1)],1),1===t.type?e("FormItem",{attrs:{label:"个人名称",prop:"receiptTitle"}},[e("i-input",{model:{value:t.invoiceForm.receiptTitle,callback:function(e){t.$set(t.invoiceForm,"receiptTitle",e)},expression:"invoiceForm.receiptTitle"}})],1):t._e(),2===t.type?e("FormItem",{attrs:{label:"单位名称",prop:"receiptTitle"}},[e("i-input",{model:{value:t.invoiceForm.receiptTitle,callback:function(e){t.$set(t.invoiceForm,"receiptTitle",e)},expression:"invoiceForm.receiptTitle"}})],1):t._e(),2===t.type?e("FormItem",{attrs:{label:"纳税人识别号",prop:"taxpayerId"}},[e("i-input",{model:{value:t.invoiceForm.taxpayerId,callback:function(e){t.$set(t.invoiceForm,"taxpayerId",e)},expression:"invoiceForm.taxpayerId"}})],1):t._e(),e("FormItem",{attrs:{label:"发票内容"}},[e("RadioGroup",{attrs:{type:"button","button-style":"solid"},model:{value:t.invoiceForm.receiptContent,callback:function(e){t.$set(t.invoiceForm,"receiptContent",e)},expression:"invoiceForm.receiptContent"}},[e("Radio",{attrs:{label:"商品明细"}},[t._v("商品明细")]),e("Radio",{attrs:{label:"商品类别"}},[t._v("商品类别")])],1)],1)],1),e("div",{staticStyle:{"text-align":"center"}},[e("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("保存发票信息")]),e("Button",{attrs:{type:"default"},on:{click:function(e){t.invoiceAvailable=!1}}},[t._v("取消")])],1)],1)])],1)},[],!1,null,"dced94bc",null).exports,d=s("a5d4"),n=s("2f94"),d={name:"addressManage",props:{id:{defalut:"",type:String}},data(){return{showAddr:!1,formData:{isDefault:!1},ruleInline:{name:[{required:!0,message:"请输入收件人姓名",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"change"}],detail:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{type:"string",pattern:/^1[3|4|5|6|7|8][0-9]{9}$/,message:"手机号格式出错",trigger:"blur"}]},loading:!1,mapMsg:{}}},methods:{save(){this.$refs.form.validate(e=>{if(e){let e=JSON.parse(JSON.stringify(this.formData));e.consigneeAddressPath=e.address.replace(/\s/g,","),delete e.address,this.loading=!0,(this.id?Object(n.b)(e).then(e=>{this.loading=!1,e.success&&(this.$Message.success("编辑地址成功"),this.$emit("change",!0),this.hide())}):Object(n.f)(e).then(e=>{this.loading=!1,e.success&&(this.$Message.success("新增地址成功"),this.$emit("change",!0),this.hide())})).catch(()=>{this.loading=!1})}})},getAddrById(e){Object(n.c)(e).then(e=>{var t;e.success&&((t=e.result).address=e.result.consigneeAddressPath.replace(/,/g," "),this.formData=t)})},getAddress(e){var t,s;"select"===e.type?(s=e.data.map(e=>e.name).join(","),t=e.data.map(e=>e.id).join(","),this.$set(this.formData,"address",s),this.$set(this.formData,"consigneeAddressIdPath",t),s=e.data[e.data.length-1].center.split(","),this.formData.lat=s[1],this.formData.lon=s[0]):(this.$set(this.formData,"address",e.data.addr),this.$set(this.formData,"consigneeAddressIdPath",e.data.addrId),this.$set(this.formData,"detail",e.data.address),this.formData.lat=e.data.position.lat,this.formData.lon=e.data.position.lng)},show(){this.showAddr=!0},hide(){this.showAddr=!1}},watch:{id:{handler:function(e){e?this.getAddrById(e):(this.formData={isDefault:!1},this.$refs.form.resetFields())}}},components:{multipleMap:d.a}};s("723a");var d=Object(o.a)(d,function(){var t=this,e=t._self._c;return e("div",[e("Modal",{attrs:{width:"800",title:"收件人地址"},model:{value:t.showAddr,callback:function(e){t.showAddr=e},expression:"showAddr"}},[e("Form",{ref:"form",attrs:{model:t.formData,"label-position":"left","label-width":100,rules:t.ruleInline}},[e("FormItem",{attrs:{label:"收件人",prop:"name"}},[e("i-input",{staticStyle:{width:"600px"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("FormItem",{attrs:{label:"收件地区",prop:"address"}},[t._v(" "+t._s(t.formData.address||"暂无地址")+" "),e("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$refs.map.open()}}},[t._v("选择")])],1),e("FormItem",{attrs:{label:"详细地址",prop:"detail"}},[e("i-input",{staticStyle:{width:"600px"},model:{value:t.formData.detail,callback:function(e){t.$set(t.formData,"detail",e)},expression:"formData.detail"}})],1),e("FormItem",{attrs:{label:"手机号码",prop:"mobile"}},[e("i-input",{staticStyle:{width:"600px"},model:{value:t.formData.mobile,callback:function(e){t.$set(t.formData,"mobile",e)},expression:"formData.mobile"}})],1),e("FormItem",{attrs:{label:"地址别名"}},[e("i-input",{staticStyle:{width:"600px"},attrs:{length:"",maxlength:4,placeholder:"请输入地址别名，例如公司"},model:{value:t.formData.alias,callback:function(e){t.$set(t.formData,"alias",e)},expression:"formData.alias"}})],1),e("FormItem",{attrs:{label:"默认地址"}},[e("i-switch",{model:{value:t.formData.isDefault,callback:function(e){t.$set(t.formData,"isDefault",e)},expression:"formData.isDefault"}})],1)],1),e("div",{staticClass:"mt_20",attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:t.hide}},[t._v("取消")]),e("Button",{staticClass:"mr_10",attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("保存收货地址")])],1)],1),e("multipleMap",{ref:"map",on:{callback:t.getAddress}})],1)},[],!1,null,"4c48c80a",null).exports,c=s("84a9"),l=s("8194"),r={name:"Pay",components:{invoiceModal:r,addressManage:d},data(){return{selectedStoreAddress:"m",selectMethod:"",stepIndex:1,invoiceAvailable:!1,showEditBtn:"",orderMark:"",goodsType:"",storeMoreAddr:!1,invoiceData:{receiptTitle:"个人",receiptContent:"不开发票"},searchForm:{pageNumber:1,pageSize:100},shippingMethod:[],storeAddressList:[],shippingWay:[{value:"LOGISTICS",label:"物流"},{value:"SELF_PICK_UP",label:"自提"}],selectedDeliverMethod:"LOGISTICS",addressList:[],selectedAddress:{},goodsList:[],priceDetailDTO:{},totalNum:0,addrId:"",moreAddr:!1,canUseCouponNum:0,couponList:[],usedCouponId:[],selectedCoupon:{},storeId:""}},mounted(){this.init()},methods:{init(){this.getGoodsDetail(),this.getDistribution()},goAddressManage(){this.$router.push("/home/MyAddress")},getAddress(){Object(n.e)(this.searchForm).then(e=>{e.success&&(this.addressList=e.result.records,this.addressList.forEach((e,t)=>{e.id===this.selectedAddress.id&&2<t&&(this.moreAddr=!0)}))})},async getDistribution(){let e,t=await Object(i.r)({way:this.$route.query.way});if(t.success){e=t.result;let s=[];this.shippingWay.forEach(t=>{e.forEach(e=>{t.value==e&&s.push(t)})}),this.shippingMethod=s}},async getStoreAddressList(){Object(c.h)(this.storeId,this.searchForm).then(e=>{e.success&&(this.storeAddressList=e.result.records,this.storeAddressList.forEach((e,t)=>{e.id===this.selectedAddress.id&&2<t&&(this.storeMoreAddr=!0)}))})},getGoodsDetail(){this.$Spin.show(),Object(i.d)({way:this.$route.query.way}).then(e=>{if(this.$Spin.hide(),e.success){e.result.checkedSkuList&&0!==e.result.checkedSkuList.length||(e.result.skuList&&e.result.skuList[0]&&this.$Modal.warning({title:"购物车存在无效商品！",content:"["+e.result.skuList[0].goodsSku.goodsName+"]"+e.result.skuList[0].errorMessage}),this.$router.push({path:"/cart",replace:!0})),this.goodsList=e.result.cartList,this.priceDetailDTO=e.result.priceDetailDTO,this.skuList=e.result.skuList,e.result.skuList[0]&&e.result.skuList[0].goodsSku&&(this.goodsType=e.result.skuList[0].goodsSku.goodsType),this.storeId=this.goodsList[0].storeId,e.result.receiptVO&&(this.invoiceData=e.result.receiptVO);var t,s,i=e.result.notSupportFreight;if(this.selectedCoupon={},e.result.platformCoupon&&(this.selectedCoupon[e.result.platformCoupon.memberCoupon.id]=e.result.platformCoupon),e.result.storeCoupons&&Object.keys(e.result.storeCoupons)[0]&&(t=Object.keys(e.result.storeCoupons)[0],s=e.result.storeCoupons[t].memberCoupon.id,this.selectedCoupon[s]=e.result.storeCoupons[t]),i){let t=[],s;i.forEach(e=>{s=e.errorMessage,t.push(e.goodsSku.goodsName)}),this.$Modal.warning({title:"以下商品超出配送区域",content:t.toString()})}e.result.memberAddress&&(this.selectedAddress=e.result.memberAddress),this.getAddress(),this.getStoreAddressList();for(let e=this.totalNum=0;e<this.skuList.length;e++)this.totalNum+=this.skuList[e].num;this.usedCouponId=[],this.couponList=e.result.canUseCoupons,Object.keys(this.selectedCoupon).length&&(this.couponList.forEach(e=>{this.selectedCoupon[e.id]&&e.id===this.selectedCoupon[e.id].memberCoupon.id&&this.usedCouponId.push(e.id)}),this.$nextTick(()=>{this.$forceUpdate()}))}}).catch(()=>{this.$Spin.hide()})},getCouponNum(){Object(i.f)({way:this.$route.query.way}).then(e=>{if(this.canUseCouponNum=e.result,e.result){let t=[],s=[];this.goodsList.forEach(e=>{t.push(e.storeId),e.skuList.forEach(e=>{s.push(e.goodsSku.id)})});e={pageNumber:1,pageSize:100,memberCouponStatus:"NEW",scopeId:s.toString(),storeId:t.toString(),totalPrice:this.priceDetailDTO.goodsPrice};Object(l.i)(e).then(e=>{e.success&&(this.couponList=e.result.records);let t=Object.keys(this.selectedCoupon);this.usedCouponId=[],t.length&&(this.couponList.forEach(e=>{e.id===this.selectedCoupon[t].memberCoupon.id&&this.usedCouponId.push(e.id)}),this.$nextTick(()=>{this.$forceUpdate()}))})}})},selectAddress(t){var e={way:this.$route.query.way,shippingAddressId:t.id};Object(i.j)(e).then(e=>{e.success&&(this.$Message.success("选择配送方式成功"),this.selectMethod=t,this.getGoodsDetail())})},selectStoreAddress(t){Object(i.q)(t.id,this.$route.query.way).then(e=>{e.success&&(this.$Message.success("选择自提地址成功"),this.selectedStoreAddress=t,this.getGoodsDetail())})},selectDeliverMethod(t){var e={way:this.$route.query.way,shippingMethod:t.value};Object(i.p)(e).then(e=>{e.success&&(this.selectedDeliverMethod=t.value,this.getGoodsDetail())})},editAddress(e){this.addrId=e,this.$refs.address.show()},addrChange(){this.getAddress()},delAddress(e){this.$Modal.confirm({title:"提示",content:"你确定删除这个收货地址",onOk:()=>{Object(n.a)(e.id).then(e=>{e.success&&(this.$Message.success("删除成功"),this.getAddress())})},onCancel:()=>{}})},goGoodsDetail(e,t){e=this.$router.resolve({path:"/goodsDetail",query:{skuId:e,goodsId:t}});window.open(e.href,"_blank")},goShopPage(e){e=this.$router.resolve({path:"/Merchant",query:{id:e}});window.open(e.href,"_blank")},useCoupon(e,t){e={way:this.$route.query.way,memberCouponId:e,used:t};Object(i.k)(e).then(e=>{e.success&&this.init()})},editInvoice(){this.$refs.invModal.invoiceAvailable=!0},getInvMsg(e){e&&(this.init(),this.$refs.invModal.invoiceAvailable=!1)},pay(){let t={client:"PC",remark:[],way:this.$route.query.way};this.goodsList.forEach(e=>{e.remark&&t.remark.push({remark:e.remark,storeId:e.storeId})}),t.remark.length||delete t.remark,this.$Spin.show(),Object(i.g)(t).then(e=>{this.$Spin.hide(),e.success&&("POINTS"===t.way?this.$router.push("/payDone"):this.$router.push({path:"/payment",query:{orderType:"TRADE",sn:e.result.sn}}))}).catch(()=>{this.$Spin.hide()})},useScope(e){let t="全部商品";switch(e){case"ALL":t="全部商品";break;case"PORTION_GOODS":t="部分商品";break;case"PORTION_GOODS_CATEGORY":t="部分分类商品"}return t+"可用"}}},d=(s("c7c6"),Object(o.a)(r,function(){var i=this,a=i._self._c;return a("div",{staticClass:"pay-order"},[a("BaseHeader"),a("div",{staticClass:"width_1200 logo"},[a("div",[a("router-link",{attrs:{to:"/"}},[a("img",{attrs:{src:i.$store.state.logoImg}})]),a("div",[i._v("结算页")])],1),a("div",{staticClass:"cart-steps"},[a("span",{class:1==i.stepIndex?"active":""},[i._v("1.我的购物车")]),a("Icon",{class:1==i.stepIndex?"active-arrow":"",attrs:{custom:"icomoon icon-next"}}),a("span",{class:1==i.stepIndex?"active":""},[i._v("2.填写订单信息")]),a("Icon",{class:1==i.stepIndex?"active-arrow":"",attrs:{custom:"icomoon icon-next"}}),a("span",{class:2==i.stepIndex?"active":""},[i._v("3.成功提交订单")])],1)]),a("Divider"),a("div",{staticClass:"content width_1200"},["LOGISTICS"===i.selectedDeliverMethod&&"VIRTUAL_GOODS"!==i.goodsType?a("div",{staticClass:"address"},[a("div",{staticClass:"card-head"},[a("span",[i._v("收货人信息")]),a("span",{on:{click:i.goAddressManage}},[i._v("管理收货人地址")])]),a("div",{staticClass:"address-manage"},[i._l(i.addressList,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:!!i.moreAddr||s<3,expression:"moreAddr ? true : index < 3"}],key:s,staticClass:"address-item",class:i.selectedAddress.id===t.id?"border-red":"",on:{mouseenter:function(e){i.showEditBtn=s},mouseleave:function(e){i.showEditBtn=""},click:function(e){return i.selectAddress(t)}}},[a("div",[a("span",[i._v(i._s(t.name))]),t.isDefault?a("Tag",{staticClass:"ml_10",attrs:{color:"red"}},[i._v("默认")]):i._e(),t.alias?a("Tag",{staticClass:"ml_10",attrs:{color:"warning"}},[i._v(i._s(t.alias)+" ")]):i._e()],1),a("div",[i._v(i._s(t.mobile))]),a("div",[i._v(" "+i._s(i._f("unitAddress")(t.consigneeAddressPath))+" "+i._s(t.detail)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:i.showEditBtn===s,expression:"showEditBtn === index"}],staticClass:"edit-btn"},[a("span",{on:{click:function(e){return e.stopPropagation(),i.editAddress(t.id)}}},[i._v("修改")]),t.isDefault?i._e():a("span",{staticClass:"ml_10",on:{click:function(e){return e.stopPropagation(),i.delAddress(t)}}},[i._v("删除")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:i.selectedAddress.id===t.id,expression:"selectedAddress.id === item.id"}],staticClass:"corner-icon"},[a("div"),a("Icon",{attrs:{type:"md-checkmark"}})],1)])}),a("div",{staticClass:"add-address",on:{click:function(e){return i.editAddress("")}}},[a("Icon",{attrs:{type:"ios-add-circle-outline"}}),a("div",[i._v("添加新地址")])],1)],2),3<i.addressList.length?a("div",{staticClass:"more-addr",on:{click:function(e){i.moreAddr=!i.moreAddr}}},[i._v(" "+i._s(i.moreAddr?"收起地址":"更多地址")+" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!i.moreAddr,expression:"!moreAddr"}],attrs:{type:"md-arrow-dropdown"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:i.moreAddr,expression:"moreAddr"}],attrs:{type:"md-arrow-dropup"}})],1):i._e()]):i._e(),"SELF_PICK_UP"===i.selectedDeliverMethod?a("div",{staticClass:"address"},[i._m(0),a("div",{staticClass:"address-manage"},i._l(i.storeAddressList,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:!!i.storeMoreAddr||s<3,expression:"storeMoreAddr ? true : index < 3"}],key:s,staticClass:"address-item",class:i.selectedAddress.id===t.id?"border-red":"",on:{mouseenter:function(e){i.showEditBtn=s},mouseleave:function(e){i.showEditBtn=""},click:function(e){return i.selectStoreAddress(t)}}},[a("div",[a("span",[i._v(i._s(t.addressName))])]),a("div",[i._v(i._s(t.mobile))]),a("div",[i._v(" "+i._s(i._f("unitAddress")(t.address))+" "+i._s(t.detail)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:i.selectedStoreAddress.id===t.id,expression:"selectedStoreAddress.id === item.id"}],staticClass:"corner-icon"},[a("div"),a("Icon",{attrs:{type:"md-checkmark"}})],1)])}),0),3<i.addressList.length?a("div",{staticClass:"more-addr",on:{click:function(e){i.storeMoreAddr=!i.storeMoreAddr}}},[i._v(" "+i._s(i.storeMoreAddr?"收起地址":"更多地址")+" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!i.storeMoreAddr,expression:"!storeMoreAddr"}],attrs:{type:"md-arrow-dropdown"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:i.storeMoreAddr,expression:"storeMoreAddr"}],attrs:{type:"md-arrow-dropup"}})],1):i._e()]):i._e(),a("div"),"VIRTUAL_GOODS"!==i.goodsType?a("div",{staticClass:"goods-content"},[i._m(1),a("div",{staticClass:"delivery-method"},i._l(i.shippingMethod,function(t,e){return a("div",{directives:[{name:"show",rawName:"v-show",value:!!i.moreAddr||e<3,expression:"moreAddr ? true : index < 3"}],key:e,staticClass:"method-item",class:i.selectedDeliverMethod===t.value?"border-red":"",on:{mouseenter:function(e){i.showEditBtn=t.value},mouseleave:function(e){i.showEditBtn=""},click:function(e){return i.selectDeliverMethod(t)}}},[a("div",[i._v(i._s(t.label))]),a("div",{directives:[{name:"show",rawName:"v-show",value:i.selectedDeliverMethod===t.value,expression:"selectedDeliverMethod === item.value"}],staticClass:"corner-icon"},[a("div"),a("Icon",{attrs:{type:"md-checkmark"}})],1)])}),0)]):i._e(),a("div",{staticClass:"goods-content"},[a("div",{staticClass:"card-head mt_20 mb_20"},[a("span",[i._v("商品信息")]),a("span",{on:{click:function(e){return i.$router.push("/cart")}}},[i._v("返回购物车")])]),i._l(i.goodsList,function(t,e){return a("div",{key:e,staticClass:"goods-msg"},[t.checked?a("div",[a("div",{staticClass:"shop-name"},[a("span",[a("span",{staticClass:"hover-color",on:{click:function(e){return i.goShopPage(t.storeId)}}},[i._v(i._s(t.storeName))]),i._v("   ")])]),a("div",{staticClass:"goods-list"},i._l(t.checkedSkuList,function(t,e){return a("div",{key:e,staticClass:"goods-item"},[a("span",{staticClass:"hover-color",on:{click:function(e){return i.goGoodsDetail(t.goodsSku.id,t.goodsSku.goodsId)}}},[a("img",{attrs:{src:t.goodsSku.thumbnail,alt:""}}),a("span",{staticStyle:{"vertical-align":"top"}},[i._v(i._s(t.goodsSku.goodsName))])]),a("span",{staticClass:"goods-price"},[i._v(i._s(i._f("unitPrice")(t.purchasePrice,"￥")))]),a("span",[i._v("x"+i._s(t.num))]),a("span",[i._v(i._s(0<t.goodsSku.quantity?"有货":"无货"))]),a("span",{staticClass:"goods-price"},[i._v(i._s(i._f("unitPrice")(t.subTotal,"￥")))])])}),0),a("div",{staticClass:"order-mark"},[a("Input",{attrs:{type:"textarea",maxlength:"60","show-word-limit":"",placeholder:"订单备注"},model:{value:t.remark,callback:function(e){i.$set(t,"remark",e)},expression:"shop.remark"}}),a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[i._v("提示：请勿填写有关支付、收货、发票方面的信息")])],1)]):i._e()])})],2),a("div",{staticClass:"invoice"},[a("div",{staticClass:"card-head mt_20 mb_20"},[a("span",{staticClass:"relative"},[i._v("发票信息"),a("span",{staticClass:"inv-tips"},[a("Icon",{attrs:{type:"ios-alert-outline"}}),i._v("开企业抬头发票须填写纳税人识别号，以免影响报销 ")],1)])]),a("div",{staticClass:"inovice-content"},[a("span",[i._v(i._s(i.invoiceData.receiptTitle))]),a("span",[i._v(i._s(i.invoiceData.receiptContent))]),a("span",{on:{click:i.editInvoice}},[i._v("编辑")])])]),a("div",{staticClass:"invoice"},[i._m(2),0===i.couponList.length?a("div",[i._v("无可用优惠券")]):a("ul",{staticClass:"coupon-list"},i._l(i.couponList,function(t,e){return a("li",{key:e,staticClass:"coupon-item"},[a("div",{staticClass:"c-left"},[a("div",["PRICE"===t.couponType?a("span",{staticClass:"fontsize_12 global_color"},[i._v("￥"),a("span",{staticClass:"price"},[i._v(i._s(i._f("unitPrice")(t.price)))])]):i._e(),"DISCOUNT"===t.couponType?a("span",{staticClass:"fontsize_12 global_color"},[a("span",{staticClass:"price"},[i._v(i._s(t.discount))]),i._v("折")]):i._e(),a("span",{staticClass:"describe"},[i._v("满"+i._s(t.consumeThreshold)+"元可用")])]),a("p",[i._v("使用范围："+i._s(i.useScope(t.scopeType)))]),a("p",[i._v("有效期："+i._s(t.endTime))])]),i.usedCouponId.includes(t.id)?a("img",{staticClass:"used",attrs:{src:s("e092"),alt:""}}):i._e(),a("b"),a("a",{staticClass:"c-right",on:{click:function(e){return i.useCoupon(t.id,!0)}}},[i._v("立即使用")]),i.usedCouponId.includes(t.id)?a("a",{staticClass:"c-right",on:{click:function(e){return i.useCoupon(t.id,!1)}}},[i._v("放弃优惠")]):i._e(),a("i",{staticClass:"circle-top"}),a("i",{staticClass:"circle-bottom"})])}),0)]),a("div",{staticClass:"order-price"},[a("div",[a("span",[i._v(i._s(i.totalNum)+"件商品，总商品金额：")]),a("span",[i._v(i._s(i._f("unitPrice")(i.priceDetailDTO.goodsPrice,"￥")))])]),0<i.priceDetailDTO.freightPrice?a("div",[a("span",[i._v("运费：")]),a("span",[i._v(i._s(i._f("unitPrice")(i.priceDetailDTO.freightPrice,"￥")))])]):i._e(),0<i.priceDetailDTO.discountPrice?a("div",[a("span",[i._v("优惠金额：")]),a("span",[i._v("-"+i._s(i._f("unitPrice")(i.priceDetailDTO.discountPrice,"￥")))])]):i._e(),0<i.priceDetailDTO.couponPrice?a("div",[a("span",[i._v("优惠券金额：")]),a("span",[i._v("-"+i._s(i._f("unitPrice")(i.priceDetailDTO.couponPrice,"￥")))])]):i._e(),"POINTS"===i.$route.query.way?a("div",[a("span",[i._v("应付积分：")]),a("span",{staticClass:"actrual-price"},[i._v(i._s(i.priceDetailDTO.payPoint))])]):a("div",[a("span",[i._v("应付金额：")]),a("span",{staticClass:"actrual-price"},[i._v(i._s(i._f("unitPrice")(i.priceDetailDTO.flowPrice,"￥")))])])])]),a("div",{staticClass:"order-footer width_1200"},[a("div",{staticClass:"pay ml_20",on:{click:i.pay}},[i._v("提交订单")]),i.addressList.length&&"LOGISTICS"===i.selectedDeliverMethod?a("div",{staticClass:"pay-address"},[i._v(" 配送至："+i._s(i._f("unitAddress")(i.selectedAddress.consigneeAddressPath))+" "+i._s(i.selectedAddress.detail)+"  收货人："+i._s(i.selectedAddress.name)+"  "+i._s(i.selectedAddress.mobile)+" ")]):i._e(),i.addressList.length&&"SELF_PICK_UP"===i.selectedDeliverMethod?a("div",{staticClass:"pay-address"},[i._v(" 自提地点："+i._s(i.selectedStoreAddress.address)+"   联系方式："+i._s(i.selectedStoreAddress.mobile)+" ")]):i._e()]),a("BaseFooter"),a("invoice-modal",{ref:"invModal",attrs:{invoiceData:i.invoiceData},on:{change:i.getInvMsg}}),a("address-manage",{ref:"address",attrs:{id:i.addrId},on:{change:i.addrChange}})],1)},[function(){var e=this._self._c;return e("div",{staticClass:"card-head"},[e("span",[this._v("自提点信息")])])},function(){var e=this._self._c;return e("div",{staticClass:"card-head mt_20 mb_20"},[e("span",[this._v("配送方式")])])},function(){var e=this._self._c;return e("div",{staticClass:"card-head mt_20 mb_20"},[e("span",{staticClass:"relative"},[this._v("优惠券")])])}],!1,null,"6d0ca61c",null));t.default=d.exports},c7c6:function(e,t,s){s("847c")},e092:function(e,t,s){e.exports=s.p+"static/img/geted.3f84cfb6.png"}}]);