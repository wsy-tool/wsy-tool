(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-463aaa72"],{"351e":function(t,e,a){a.r(e);var s=a("8194"),r=a("f8b7"),i=a("9243"),l={name:"aftersale-detail",data(){return{afterSale:{},logList:[],reasonList:[],afterSaleStatusList:i.a,companyList:[],logisticsShow:!1,form:{afterSaleSn:"",logisticsId:"",logisticsNo:"",mDeliverTime:""},rules:{logisticsId:[{required:!0,message:"请选择物流公司"}],logisticsNo:[{required:!0,message:"请填写物流编号"}],mDeliverTime:[{required:!0,message:"请选择发货时间"}]},submitLoading:!1}},methods:{getDetail(){Object(s.b)(this.$route.query.sn).then(t=>{t.success&&(this.afterSale=t.result,this.afterSale.serviceName=this.filterOrderStatus(this.afterSale.serviceStatus),new RegExp("[0-9]+").test(this.afterSale.reason)?this.getReason(this.afterSale.serviceType):this.$set(this.afterSale,"reasonName",this.afterSale.reason))})},getReason(t){Object(s.f)(t).then(t=>{t.success&&(this.reasonList=t.result,this.reasonList.forEach(t=>{t.id===this.afterSale.reason&&this.$set(this.afterSale,"reasonName",t.reason)}))})},getLog(){Object(s.e)(this.$route.query.sn).then(t=>{this.logList=t.result})},filterOrderStatus(e){var t=this.afterSaleStatusList.filter(t=>t.status===e);if(t.length)return t[0].name},perviewImg(t){window.open(t,"_blank")},cancel(t){this.$Modal.confirm({title:"取消",content:"<p>确定取消此次售后申请吗？</p>",onOk:()=>{Object(s.j)(t).then(t=>{t.success&&(this.$Message.success("取消售后申请成功"),this.getDetail())})},onCancel:()=>{}})},getCompany(){Object(r.f)().then(t=>{t.success&&(this.companyList=t.result)})},submitDelivery(){this.submitLoading=!0,Object(r.a)(this.form).then(t=>{t.success&&(this.logisticsShow=!1,this.$Message.success("提交成功"),this.getDetail()),this.submitLoading=!1}).catch(()=>{this.submitLoading=!1})},openModal(){this.form.afterSaleSn=this.afterSale.sn,this.logisticsShow=!0,this.$refs.form.resetFields(),this.companyList.length||this.getCompany()},changeTime(t){this.form.mDeliverTime=t}},mounted(){this.getDetail(),this.getLog()}},a=(a("60d5"),a("2877")),a=Object(a.a)(l,function(){var a=this,s=a._self._c;return s("div",{staticClass:"order-detail"},[s("card",{attrs:{_Title:"售后详情",_Size:16}}),"PASS"==a.afterSale.serviceStatus&&"RETURN_MONEY"!=a.afterSale.serviceType||a.afterSale.afterSaleAllowOperationVO&&a.afterSale.afterSaleAllowOperationVO.cancel?s("Card",{staticClass:"mb_10"},["PASS"==a.afterSale.serviceStatus&&"RETURN_MONEY"!=a.afterSale.serviceType?s("Button",{attrs:{type:"success",size:"small"},on:{click:a.openModal}},[a._v("提交物流")]):a._e(),a._v("  "),a.afterSale.afterSaleAllowOperationVO&&a.afterSale.afterSaleAllowOperationVO.cancel?s("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.cancel(a.afterSale.sn)}}},[a._v("取消售后")]):a._e()],1):a._e(),s("div",{staticClass:"order-card"},[s("h3",[a._v(a._s(a.afterSale.serviceName))]),s("p",{staticClass:"global_color fontsize_18"},[a._v(a._s(a.afterSale.orderStatusValue))]),s("p",[a._v("售后单号："+a._s(a.afterSale.sn)+"    订单号："+a._s(a.afterSale.orderSn))]),s("div",{staticClass:"operation-time",staticStyle:{color:"#999"}},[a._v("创建时间："+a._s(a.afterSale.createTime))]),s("div",{staticClass:"service-after"},[s("div",[a._v(" 本次售后服务由"),s("span",[a._v(a._s(a.afterSale.storeName))]),a._v("为您提供 ")]),s("div",[s("img",{attrs:{src:a.afterSale.goodsImage,alt:"",width:"60",height:"60"}}),s("span",[a._v(a._s(a.afterSale.goodsName))])])])]),s("div",{staticClass:"order-card"},[s("h3",[a._v("售后进程")]),s("Steps",{staticClass:"progress",attrs:{current:a.logList.length,direction:"vertical"}},a._l(a.logList,function(t,e){return s("Step",{key:e,attrs:{content:"操作人："+t.operatorName+"   "+t.createTime,title:t.message}})}),1)],1),s("div",{staticClass:"order-card"},[s("h3",{staticClass:"mb_10"},[a._v("服务单信息")]),s("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[s("tr",[s("td",[a._v("退款方式")]),s("td",[a._v(a._s("ORIGINAL"==a.afterSale.refundWay?"原路退回":"账号退款"))])]),s("tr",[s("td",[a._v("申请退款金额")]),s("td",[a._v(a._s(a._f("unitPrice")(a.afterSale.applyRefundPrice,"￥")))])]),a.afterSale.actualRefundPrice?s("tr",[s("td",[a._v("实际退款金额")]),s("td",[a._v(a._s(a._f("unitPrice")(a.afterSale.actualRefundPrice,"￥")))])]):a._e(),"OFFLINE"===a.afterSale.refundWay?[s("tr",[s("td",[a._v("退款开户行")]),s("td",[a._v(a._s(a.afterSale.bankDepositName))])]),s("tr",[s("td",[a._v("退款开户名")]),s("td",[a._v(a._s(a.afterSale.bankAccountName))])]),s("tr",[s("td",[a._v("退款卡号")]),s("td",[a._v(a._s(a.afterSale.bankAccountNumber))])])]:a._e(),s("tr",[s("td",[a._v("商品处理方式")]),s("td",[a._v(a._s("RETURN_MONEY"==a.afterSale.serviceType?"退款":"退货"))])]),s("tr",[s("td",[a._v("退款原因")]),s("td",[a._v(a._s(a.afterSale.reasonName))])]),s("tr",[s("td",[a._v("问题描述")]),s("td",[a._v(a._s(a.afterSale.problemDesc))])])],2)]),a.afterSale.afterSaleImage?s("div",{staticClass:"order-card"},[s("h3",{staticClass:"mb_10"},[a._v("图片信息")]),a._l(a.afterSale.afterSaleImage.split(","),function(e){return s("div",{key:e},[s("img",{staticClass:"hover-pointer",attrs:{src:e,width:"200",height:"200",alt:""},on:{click:function(t){return a.perviewImg(e)}}})])})],2):a._e(),s("Modal",{attrs:{width:"530"},model:{value:a.logisticsShow,callback:function(t){a.logisticsShow=t},expression:"logisticsShow"}},[s("p",{attrs:{slot:"header"},slot:"header"},[s("span",[a._v("提交物流信息")])]),s("div",[s("Form",{ref:"form",attrs:{model:a.form,"label-position":"left","label-width":100,rules:a.rules}},[s("FormItem",{attrs:{label:"物流公司",prop:"logisticsId"}},[s("Select",{attrs:{placeholder:"请选择物流公司"},model:{value:a.form.logisticsId,callback:function(t){a.$set(a.form,"logisticsId",t)},expression:"form.logisticsId"}},a._l(a.companyList,function(t){return s("Option",{key:t.id,attrs:{value:t.id}},[a._v(a._s(t.name))])}),1)],1),s("FormItem",{attrs:{label:"物流单号",prop:"logisticsNo"}},[s("Input",{attrs:{placeholder:"请填写物流单号"},model:{value:a.form.logisticsNo,callback:function(t){a.$set(a.form,"logisticsNo",t)},expression:"form.logisticsNo"}})],1),s("FormItem",{attrs:{label:"发货时间",prop:"mDeliverTime"}},[s("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择发货时间"},on:{"on-change":a.changeTime},model:{value:a.form.mDeliverTime,callback:function(t){a.$set(a.form,"mDeliverTime",t)},expression:"form.mDeliverTime"}})],1)],1)],1),s("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){a.logisticsShow=!1}}},[a._v("关闭")]),s("Button",{attrs:{type:"primary",loading:a.submitLoading},on:{click:a.submitDelivery}},[a._v("提交")])],1)])],1)},[],!1,null,"a04c9a74",null);e.default=a.exports},"3a7a":function(t,e,a){},"60d5":function(t,e,a){a("3a7a")},9243:function(t,e,a){a.d(e,"b",function(){return s}),a.d(e,"a",function(){return r});let s=[{name:"全部",status:"ALL"},{name:"未付款",status:"UNPAID"},{name:"已付款",status:"PAID"},{name:"待发货",status:"UNDELIVERED"},{name:"部分发货",status:"PARTS_DELIVERED"},{name:"已发货",status:"DELIVERED"},{name:"已完成",status:"COMPLETED"},{name:"待核验",status:"TAKE"},{name:"已关闭",status:"CANCELLED"},{name:"待提货",status:"STAY_PICKED_UP"}],r=[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家确认收货",status:"BUYER_CONFIRM"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]}}]);