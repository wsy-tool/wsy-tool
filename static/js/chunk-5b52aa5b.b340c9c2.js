(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5b52aa5b"],{"669d":function(t,s,i){},a8d2:function(t,s,i){i.r(s);var e=i("f74c"),o={data(){return{list:[],goodsList:[],interval:null,currIndex:0,currTime:0,diffSeconds:0,nowHour:(new Date).getHours()}},beforeDestroy(){clearInterval(this.interval)},watch:{currIndex(t){clearInterval(this.interval),this.interval=null,this.nowHour=(new Date).getHours(),this.countDown(t),this.goodsList=this.list[t].seckillGoodsList},diffSeconds(t){var s=Math.floor(t/3600),i=Math.floor(t/60)%60;function e(t){return t<10?"0"+t:t}this.currTime=e(s)+":"+e(i)+":"+e(t%60),t<=0&&(clearInterval(this.interval),this.interval=null)}},methods:{getListByDay(){Object(e.d)().then(t=>{t.success&&(this.list=t.result,this.goodsList=this.list[0].seckillGoodsList,this.countDown(this.currIndex))})},goGoodsDetail(t,s){t=this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:s}});window.open(t.href,"_blank")},countDown(t){let s=new Date((new Date).toLocaleDateString()).getTime(),i=(new Date).getTime(),e=0,o=(new Date).getHours();this.list[t].timeLine>o?e=s+3600*this.list[t].timeLine*1e3:this.list[t].timeLine<=o&&(e=t===this.list.length-1?s+864e5:s+3600*this.list[t+1].timeLine*1e3),this.diffSeconds=Math.floor((e-i)/1e3),this.interval=setInterval(()=>{this.diffSeconds--},1e3)}},mounted(){this.getListByDay()}},i=(i("bbd8"),i("2877")),i=Object(i.a)(o,function(){var i=this,e=i._self._c;return e("div",{staticClass:"seckill-list"},[e("BaseHeader"),e("Search"),e("div",{staticClass:"promotion-decorate"},[i._v("限时秒杀")]),e("ul",{staticClass:"time-line"},[i._l(i.list,function(t,s){return[s<5?e("li",{key:s,class:{currTimeline:i.currIndex===s},on:{click:function(t){i.currIndex=s}}},[e("div",[i._v(i._s(t.timeLine+":00"))]),i.currIndex===s?e("div",[e("p",[i._v(i._s(i.nowHour>=t.timeLine?"秒杀中":"即将开始"))]),e("p",[i._v(" "+i._s(i.nowHour>=t.timeLine?"距结束":"距开始")+" "+i._s(i.currTime)+" ")])]):e("div",{staticClass:"not-curr"},[i._v(" "+i._s(i.nowHour>=t.timeLine?"秒杀中":"即将开始")+" ")])]):i._e()]})],2),e("div",{staticClass:"goods-list"},[0===i.goodsList.length?e("empty"):i._l(i.goodsList,function(s,t){return e("div",{key:t,staticClass:"goods-show-info1",on:{click:function(t){return i.goGoodsDetail(s.skuId,s.goodsId)}}},[e("div",{staticClass:"goods-show-img"},[e("img",{attrs:{width:"200",height:"200",src:s.goodsImage}})]),e("div",{staticClass:"goods-show-price"},[e("span",[e("span",{staticClass:"seckill-price text-danger"},[i._v(i._s(i._f("unitPrice")(s.price,"￥")))]),e("span",{staticStyle:{color:"#999","text-decoration":"line-through"}},[i._v(i._s(i._f("unitPrice")(s.originalPrice,"￥")))])])]),e("div",{staticClass:"goods-show-detail",staticStyle:{"margin-bottom":"20px"}},[e("span",[i._v(i._s(s.goodsName))])]),e("div",{staticClass:"goods-seckill-btn",class:{"goods-seckill-btn-gray":i.nowHour<i.list[i.currIndex].timeLine}},[i._v(" "+i._s(i.nowHour>=i.list[i.currIndex].timeLine?"立即抢购":"即将开始")+" ")]),i.nowHour>=i.list[i.currIndex].timeLine&&s.quantity<=s.salesNum?e("div",{staticClass:"goods-seckill-btn goods-seckill-btn-gray"},[i._v(" 已售罄 ")]):i._e(),i.nowHour>=i.list[i.currIndex].timeLine?e("div",{staticClass:"goods-show-num1"},[e("span",[i._v("已售"+i._s((s.quantity&&0<s.quantity?Math.ceil(s.salesNum/s.quantity*100):100)+"%"))]),e("Progress",{staticClass:"ml_10",staticStyle:{width:"110px"},attrs:{"hide-info":"","stroke-color":"#df0021",percent:s.quantity&&0<s.quantity?Math.ceil(s.salesNum/s.quantity*100):100}})],1):i._e(),e("div",{staticClass:"goods-show-seller"},[e("span",[i._v(i._s(s.storeName))])])])})],2),e("BaseFooter")],1)},[],!1,null,"391366c5",null);s.default=i.exports},bbd8:function(t,s,i){i("669d")}}]);