(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-64f642c4"],{"33c0":function(e,t,s){},"7ded":function(e,t,s){s.d(t,"e",function(){return o}),s.d(t,"c",function(){return a}),s.d(t,"h",function(){return n}),s.d(t,"a",function(){return i}),s.d(t,"j",function(){return c}),s.d(t,"d",function(){return d}),s.d(t,"i",function(){return u}),s.d(t,"f",function(){return l}),s.d(t,"b",function(){return h}),s.d(t,"g",function(){return p});var r=s("ff66");function o(e){return Object(r.d)({url:"/buyer/passport/member/register",method:r.a.POST,needToken:!1,data:e})}function a(e){return Object(r.d)({url:"/buyer/passport/member/userLogin",method:r.a.POST,needToken:!1,data:e,headers:{clientType:"PC"}})}function n(e){return Object(r.d)({url:"/buyer/passport/member/smsLogin",method:r.a.POST,needToken:!1,data:e,headers:{clientType:"PC"}})}function i(e){return Object(r.d)({url:"/buyer/passport/member",method:r.a.GET,needToken:!0,params:e})}function c(e){window.open(r.b+"/buyer/passport/connect/connect/login/web/"+e,"blank")}function d(e){return Object(r.d)({url:"/buyer/passport/connect/connect/result?state="+e,method:r.a.GET,needToken:!1})}function u(e){return Object(r.d)({url:"/buyer/passport/member/resetByMobile",method:r.a.POST,needToken:!1,params:e})}function l(e){return Object(r.d)({url:"/buyer/passport/member/resetPassword",method:r.a.POST,needToken:!1,params:e})}function h(e){return Object(r.d)({url:"/buyer/passport/member/pc_session",method:r.a.POST,needToken:!1,params:e})}function p(e,t){return Object(r.d)({url:"/buyer/passport/member/session_login/"+e,method:r.a.POST,needToken:!1,params:t})}},"84a9":function(e,t,s){s.d(t,"b",function(){return o}),s.d(t,"c",function(){return a}),s.d(t,"e",function(){return n}),s.d(t,"g",function(){return i}),s.d(t,"f",function(){return c}),s.d(t,"a",function(){return d}),s.d(t,"d",function(){return u}),s.d(t,"h",function(){return l});var r=s("ff66");function o(e){return Object(r.d)({url:"/buyer/store/store/apply/first",needToken:!0,method:r.a.PUT,params:e})}function a(e){return Object(r.d)({url:"/buyer/store/store/apply/second",needToken:!0,method:r.a.PUT,params:e})}function n(e){return Object(r.d)({url:"/buyer/store/store/apply/third",needToken:!0,method:r.a.PUT,params:e})}function i(e){return Object(r.d)({url:"/buyer/store/store/get/detail/"+e,needToken:!0,method:r.a.GET})}function c(e){return Object(r.d)({url:"/buyer/store/store/label/get/"+e,needToken:!0,method:r.a.GET})}function d(){return Object(r.d)({url:"/buyer/other/article/type/STORE_REGISTER",needToken:!0,method:r.a.GET})}function u(){return Object(r.d)({url:"/buyer/store/store/apply",needToken:!0,method:r.a.GET})}function l(e,t){return Object(r.d)({url:"/buyer/store/address/page/"+e,method:r.a.GET,params:t})}},"9f83":function(e,t,s){s.r(t);var r=s("84a9"),o=s("8194"),a=s("c40e"),n=s("c106"),i=s("4540"),c=s("73ae"),d=s("e487"),u=s("365c"),l=s("def3"),n={name:"Merchant",components:{Search:n.a,ModelForm:i.a,HoverSearch:c.a},mixins:[l.a],data(){return{modelForm:{list:[]},topAdvert:{},showNav:!1,topSearchShow:!1,carouselLarge:!1,carouselOpacity:!1,enablePageData:!1,basePageData:!1,storeMsg:{},cateList:[],goodsList:[],total:0,params:{pageNumber:1,pageSize:20,keyword:"",storeId:this.$route.query.id,storeCatId:""},cateName:"店铺推荐",storeCollected:!1}},created(){this.getStoreMsg()},methods:{getIndexData(){Object(u.b)({clientType:"PC",num:this.$route.query.id,pageType:"STORE"}).then(e=>{if(e.success){var t=JSON.parse(e.result.pageData);for(let e of t.list){var s=e.type;"carousel2"===s?this.carouselLarge=!0:"carousel1"===s&&(this.carouselLarge=!0,this.carouselOpacity=!0)}this.modelForm=t,d.a.setItem("navList",t.list[1]),this.showNav=!0,this.topAdvert=t.list[0]}})},getStoreMsg(){Object(r.g)(this.$route.query.id).then(e=>{if(e.success){this.storeMsg=e.result,this.storeMsg.pageShow&&"1"===this.storeMsg.pageShow?this.getIndexData():(this.getGoodsList(),this.getCateList());let t=this;window.onscroll=function(){var e=document.documentElement.scrollTop||document.body.scrollTop;t.topSearchShow=300<e}}})},getCateList(){Object(r.f)(this.$route.query.id).then(e=>{e.success&&(this.cateList=e.result)})},getGoodsList(){Object(a.c)(this.params).then(e=>{e.success&&(this.goodsList=e.result.records,this.total=e.result.total)}).catch(()=>{})},goGoodsDetail(e,t){e=this.$router.resolve({path:"/goodsDetail",query:{skuId:e,goodsId:t}});window.open(e.href,"_blank")},search(e){this.params.keyword=e,this.getGoodsList()},searchByCate(e){this.params.storeCatId=e.id,this.cateName=e.labelName,this.getGoodsList()},changePageNum(e){this.params.pageNumber=e,this.getGoodsList()},changePageSize(e){this.params.pageNumber=1,this.params.pageSize=e,this.getGoodsList()},async collect(){this.storeCollected?(await Object(o.l)("STORE",this.storeMsg.storeId)).success&&(this.$Message.success("已取消收藏"),this.storeCollected=!1):200===(await Object(o.r)("STORE",this.storeMsg.storeId)).code&&(this.storeCollected=!0,this.$Message.success("收藏店铺成功,可以前往个人中心我的收藏查看"))}}},i=(s("a949"),s("2877")),c=Object(i.a)(n,function(){var s=this,r=s._self._c;return r("div",{staticClass:"merchant"},[r("BaseHeader"),r("Search",{attrs:{storeId:s.storeMsg.storeId},on:{search:s.search}}),r("div",{staticClass:"shop-logo"},[r("div",[r("p",[s._v(s._s(s.storeMsg.storeName||"店铺"))]),r("p",{staticClass:"ellipsis",attrs:{alt:s.storeMsg.storeDesc},domProps:{innerHTML:s._s(s.storeMsg.storeDesc)}})]),r("div",[r("span",{staticClass:"hover-pointer",on:{click:s.collect}},[r("Icon",{attrs:{color:s.storeCollected?"#ed3f14":"#fff",type:"ios-heart"}}),s._v(s._s(s.storeCollected?"已收藏店铺":"收藏店铺"))],1),r("span",{staticClass:"hover-pointer ml_10",staticStyle:{width:"80px"},on:{click:function(e){return s.IMService(s.storeMsg.storeId,null,null)}}},[r("Icon",{attrs:{custom:"icomoon icon-customer-service"}}),s._v("联系客服")],1)])]),r("div",{staticClass:"store-category"},[r("ul",{staticClass:"cate-list"},[r("li",{staticClass:"cate-item",on:{click:function(e){return s.searchByCate({id:"",labelName:"店铺推荐"})}}},[s._v(" 首页 ")]),s._l(s.cateList,function(t,e){return r("li",{key:e,staticClass:"cate-item"},[t.children.length?r("Dropdown",[r("div",{on:{click:function(e){return e.target!==e.currentTarget?null:s.searchByCate(t)}}},[s._v(" "+s._s(t.labelName)+" "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},s._l(t.children,function(t){return r("DropdownItem",{key:t.id,attrs:{name:t.id},nativeOn:{click:function(e){return s.searchByCate(t)}}},[s._v(s._s(t.labelName)+" ")])}),1)],1):r("span",{on:{click:function(e){return e.target!==e.currentTarget?null:s.searchByCate(t)}}},[s._v(s._s(t.labelName))])],1)})],2)]),s.storeMsg.pageShow&&"1"===s.storeMsg.pageShow?r("div",[r("model-form",{ref:"modelForm",attrs:{data:s.modelForm}})],1):r("div",[r("div",{staticClass:"promotion-decorate"},[s._v(s._s(s.cateName))]),r("div",{staticClass:"goods-list"},[0===s.goodsList.length?r("empty"):s._l(s.goodsList,function(t,e){return r("div",{key:e,staticClass:"goods-show-info",on:{click:function(e){return s.goGoodsDetail(t.id,t.goodsId)}}},[r("div",{staticClass:"goods-show-img"},[r("img",{attrs:{src:t.small,height:"220",width:"220",alt:""}})]),r("div",{staticClass:"goods-show-price"},[r("span",[r("span",{staticClass:"seckill-price text-danger"},[s._v(s._s(s._f("unitPrice")(t.price,"￥")))])])]),r("div",{staticClass:"goods-show-detail"},[r("span",[s._v(s._s(t.goodsName))])]),r("div",{staticClass:"goods-show-num"},[s._v(" 已有"),r("span",[s._v(s._s(t.commentNum||0))]),s._v("人评价 ")])])})],2),r("div",{staticClass:"goods-page"},[r("Page",{attrs:{"page-size":s.params.pageSize,total:s.total,"show-sizer":""},on:{"on-change":s.changePageNum,"on-page-size-change":s.changePageSize}})],1)]),r("BaseFooter")],1)},[],!1,null,"2f4d27aa",null);t.default=c.exports},a949:function(e,t,s){s("33c0")},def3:function(e,t,s){var r=s("2934"),a=s("e487"),n=s("7ded"),o={data(){return{Storage:a.a,IMLink:""}},methods:{async IMService(e,t,s){var r=a.a.getItem("accessToken"),o=(await this.getIMDetailMethods(),await Object(n.a)());o.success?t&&s?window.open(this.IMLink+"?token="+r+"&id="+e||this.storeMsg.storeId+"&goodsId="+t+"&skuId="+s):window.open(this.IMLink+"?token="+r+"&id="+e||this.storeMsg.storeId):this.$Message.error("请登录后再联系客服")},async getIMDetailMethods(){var e=await Object(r.e)();e.success&&(this.IMLink=e.result)}}},s=s("2877"),s=Object(s.a)(o,function(){return(0,this._self._c)("div")},[],!1,null,"588e26a1",null);t.a=s.exports}}]);