(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7053ad05"],{"6e60":function(e,t,s){},"8c5e":function(e,t,s){s("6e60")},fdb6:function(e,t,s){s.r(t);var r=s("f8b7"),a=s("8194"),i={name:"order-detail",data(){return{order:{},progressList:[],logistics:"",cancelParams:{orderSn:"",reason:""},cancelAvail:!1,cancelReason:[],orderPackage:[],packageTraceList:[],logisticsModal:!1}},methods:{refundPriceList(e){switch(e){case"ALL_REFUND":return"全部退款";case"PART_REFUND":return"部分退款";case"NO_REFUND":return"未退款";case"REFUNDING":return"退款中";default:return"未退款"}},goodsDetail(e,t){e=this.$router.resolve({path:"/goodsDetail",query:{skuId:e,goodsId:t}});window.open(e.href,"_blank")},shopPage(e){e=this.$router.resolve({path:"/Merchant",query:{id:e}});window.open(e.href,"_blank")},getDetail(){Object(r.j)(this.$route.query.sn).then(e=>{e.success&&(this.order=e.result,this.progressList=e.result.orderLogs,"LOGISTICS"===this.order.order.deliveryMethod)&&(this.getOrderPackage(this.order.order.sn),this.traces())})},getOrderPackage(e){Object(r.h)(e).then(e=>{e.success&&(this.orderPackage=e.result)})},traces(){Object(r.i)(this.$route.query.sn).then(e=>{e.success&&(this.logistics=e.result)})},logisticsList(){this.logisticsModal=!0,this.packageTraceList=this.orderPackage},received(e){Object(r.k)(e).then(e=>{e.success&&(this.$Message.success("确认收货成功"),this.getDetail())})},goPay(e){this.$router.push({path:"/payment",query:{orderType:"ORDER",sn:e}})},applyAfterSale(e){this.$router.push({name:"ApplyAfterSale",query:{sn:e}})},comment(e,t){this.$router.push({path:"/home/addEval",query:{sn:e,index:t}})},complain(e,t){this.$router.push({name:"Complain",query:{sn:e,index:t}})},handleCancelOrder(e){this.cancelParams.orderSn=e,Object(a.f)("CANCEL").then(e=>{e.success&&(this.cancelReason=e.result,this.cancelAvail=!0,this.cancelParams.reason=this.cancelReason[0].reason)})},sureCancel(){Object(r.b)(this.cancelParams).then(e=>{e.success&&(this.$Message.success("取消订单成功"),this.getDetail(),this.cancelAvail=!1)})}},mounted(){this.getDetail()}},s=(s("8c5e"),s("2877")),s=Object(s.a)(i,function(){var r=this,a=r._self._c;return r.order.order?a("div",{staticClass:"order-detail"},[a("card",{attrs:{_Title:"订单详情",_Size:16}}),r.order.allowOperationVO.pay||r.order.allowOperationVO.rog||r.order.allowOperationVO.cancel?a("Card",{staticClass:"mb_10"},[r.order.allowOperationVO.pay?a("Button",{attrs:{type:"success",size:"small"},on:{click:function(e){return r.goPay(r.order.order.sn)}}},[r._v("去支付")]):r._e(),r.order.allowOperationVO.rog?a("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return r.received(r.order.order.sn)}}},[r._v("确认收货")]):r._e(),r.order.allowOperationVO.cancel?a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return r.handleCancelOrder(r.order.order.sn)}}},[r._v("取消订单")]):r._e(),r.order.allowOperationVO.showLogistics||0<r.orderPackage.length||r.logistics?a("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return r.logisticsList()}}},[r._v("查看物流")]):r._e()],1):r._e(),r.order.order.verificationCode?a("p",{staticClass:"verificationCode"},[r._v(" 核验码："),a("span",[r._v(r._s(r.order.order.verificationCode))])]):r._e(),a("div",{staticClass:"order-card"},[a("p",{staticClass:"global_color fontsize_18"},[r._v(r._s(r.order.orderStatusValue))]),a("p",[r._v("订单号："+r._s(r.order.order.sn))]),a("div",{staticClass:"operation-time",staticStyle:{color:"#999"}},[r._v(" 操作时间："+r._s(r.order.order.updateTime||r.order.order.createTime)+" ")]),a("Steps",{staticClass:"progress",attrs:{current:r.progressList.length,direction:"vertical"}},r._l(r.progressList,function(e,t){return a("Step",{key:t,attrs:{title:e.message,content:e.createTime}})}),1)],1),"LOGISTICS"===r.order.order.deliveryMethod&&"VIRTUAL"!==r.order.order.orderType?a("div",{staticClass:"order-card"},[a("h3",[r._v("收货人信息")]),a("p",[r._v("收货人："+r._s(r.order.order.consigneeName))]),a("p",[r._v("手机号码："+r._s(r._f("secrecyMobile")(r.order.order.consigneeMobile)))]),a("p",[r._v(" 收货地址："+r._s(r._f("unitAddress")(r.order.order.consigneeAddressPath))+" "+r._s(r.order.order.consigneeDetail)+" ")])]):r._e(),"SELF_PICK_UP"===r.order.order.deliveryMethod?a("div",{staticClass:"order-card"},[a("h3",[r._v("自提点信息")]),a("p",[r._v("自提点名称："+r._s(r.order.order.storeAddressPath))]),a("p",[r._v("联系方式："+r._s(r.order.order.storeAddressMobile))])]):r._e(),a("div",{staticClass:"order-card"},[a("h3",[r._v("付款信息")]),a("p",[r._v("支付方式："+r._s(r.order.paymentMethodValue))]),a("p",[r._v("付款状态："+r._s(r.order.payStatusValue))])]),r.order.order.verificationCode||"VIRTUAL"===r.order.order.orderType?r._e():a("div",{staticClass:"order-card"},[a("h3",[r._v("配送信息")]),a("p",[r._v("配送方式："+r._s(r.order.deliveryMethodValue))]),"LOGISTICS"===r.order.order.deliveryMethod?a("p",[r._v("配送状态："+r._s(r.order.deliverStatusValue))]):r._e(),r.logistics?a("p",[r._v(" 物流信息："+r._s(r.logistics.shipper||"暂无物流信息")+" ")]):r._e(),r.logistics?a("p",[r._v(" 物流单号："+r._s(r.logistics.logisticCode||"暂无物流单号")+" ")]):r._e(),r.logistics?a("div",{staticClass:"div-express-log"},[a("div",{staticClass:"express-log"},[a("p",[r._v("订单日志：")]),r._l(r.logistics.traces,function(e,t){return a("div",{key:t},[a("span",{staticClass:"time"},[r._v(r._s(e.AcceptTime))]),a("span",{staticClass:"detail"},[r._v(r._s(e.AcceptStation))])])})],2)]):r._e()]),"PAID"===r.order.order.payStatus?a("div",{staticClass:"order-card"},[a("h3",[r._v("发票信息")]),r.order.order.needReceipt&&r.order.receipt?[a("p",[r._v("发票抬头："+r._s(r.order.receipt.receiptTitle))]),a("p",[r._v("发票内容："+r._s(r.order.receipt.receiptContent))]),r.order.receipt.taxpayerId?a("p",[r._v(" 纳税人识别号："+r._s(r.order.receipt.taxpayerId)+" ")]):r._e()]:a("div",{staticStyle:{color:"#999","margin-left":"5px"}},[r._v("未开发票")])],2):r._e(),a("div",{staticClass:"goods"},[a("div",{staticClass:"shop-name"},[a("span",{on:{click:function(e){return r.shopPage(r.order.order.storeId)}}},[r._v(r._s(r.order.order.storeName))])]),a("table",[r._m(0),a("tbody",r._l(r.order.orderItems,function(t,s){return a("tr",{key:s},[a("td",[a("img",{attrs:{src:t.image,alt:""},on:{click:function(e){return r.goodsDetail(t.skuId,t.goodsId)}}}),a("div",[a("p",{staticClass:"hover-color",on:{click:function(e){return r.goodsDetail(t.skuId,t.goodsId)}}},[r._v(" "+r._s(t.goodsName)+" ")])])]),a("td",[r._v(r._s(t.id))]),a("td",[r._v(r._s(r._f("unitPrice")(t.goodsPrice,"￥")))]),a("td",[r._v(r._s(t.num))]),a("td",[r._v(r._s(r.refundPriceList(t.isRefund)))]),a("td",[r._v(r._s(r._f("unitPrice")(t.refundPrice,"￥")))]),a("td",[r._v(r._s(r._f("unitPrice")(t.goodsPrice*t.num,"￥")))]),a("td",[t.afterSaleStatus.includes("NOT_APPLIED")||t.afterSaleStatus.includes("PART_AFTER_SALE")?a("Button",{staticClass:"mb_5",attrs:{type:"info",size:"small"},on:{click:function(e){return r.applyAfterSale(t.sn)}}},[r._v("申请售后")]):r._e(),"UNFINISHED"==t.commentStatus?a("Button",{staticClass:"fontsize_12 mb_5",attrs:{size:"small",type:"success"},on:{click:function(e){return r.comment(r.order.order.sn,s)}}},[r._v("评价")]):r._e(),"NO_APPLY"==t.complainStatus?a("Button",{staticClass:"fontsize_12",attrs:{type:"warning",size:"small"},on:{click:function(e){return r.complain(r.order.order.sn,s)}}},[r._v("投诉")]):r._e()],1)])}),0)]),a("div",{staticClass:"order-price"},[a("div",[a("span",[r._v("商品件数：")]),a("span",[r._v(r._s(r.order.order.goodsNum)+"件")])]),a("div",[a("span",[r._v("商品总价：")]),a("span",[r._v(r._s(r._f("unitPrice")(r.order.order.goodsPrice,"￥")))]),a("br")]),"VIRTUAL"!==r.order.order.orderType?a("div",[a("span",[r._v("运费：")]),a("span",[r._v("+"+r._s(r._f("unitPrice")(r.order.order.freightPrice,"￥")))]),a("br")]):r._e(),r.order.order.priceDetailDTO.couponPrice?a("div",[a("span",[r._v("优惠券：")]),a("span",[r._v("-"+r._s(r._f("unitPrice")(r.order.order.priceDetailDTO.couponPrice||0,"￥")))])]):r._e(),r.order.order.discountPrice?a("div",[a("span",[r._v("活动优惠：")]),a("span",[r._v("-"+r._s(r._f("unitPrice")(r.order.order.discountPrice,"￥")))])]):r._e(),r.order.order.priceDetailDTO.updatePrice?a("div",[a("span",[r._v("修改价格：")]),a("span",[r._v(r._s(r._f("unitPrice")(r.order.order.priceDetailDTO.updatePrice,"￥")))])]):r._e(),a("div",[a("span",[r._v("应付金额：")]),a("span",{staticClass:"actrual-price"},[r._v(r._s(r._f("unitPrice")(r.order.order.flowPrice,"￥")))])])])]),a("Modal",{attrs:{title:"请选择取消订单原因"},on:{"on-ok":r.sureCancel,"on-cancel":function(e){r.cancelAvail=!1}},model:{value:r.cancelAvail,callback:function(e){r.cancelAvail=e},expression:"cancelAvail"}},[a("RadioGroup",{attrs:{vertical:"",type:"button","button-style":"solid"},model:{value:r.cancelParams.reason,callback:function(e){r.$set(r.cancelParams,"reason",e)},expression:"cancelParams.reason"}},r._l(r.cancelReason,function(e){return a("Radio",{key:e.id,attrs:{label:e.reason}},[r._v(" "+r._s(e.reason)+" ")])}),1)],1),a("Modal",{attrs:{width:"40"},model:{value:r.logisticsModal,callback:function(e){r.logisticsModal=e},expression:"logisticsModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[r._v("查询物流")])]),a("div",{staticClass:"layui-layer-wrap"},[a("dl",[a("dt",[r._v("订单号：")]),a("dd",[a("div",{staticClass:"text-box"},[r._v(r._s(r.order.order.sn))])])])]),r._l(r.orderPackage,function(e,t){return 0<r.orderPackage.length?a("div",{key:t},[a("div",{staticClass:"layui-layer-wrap"},[a("dl",[a("dt",[r._v("物流公司：")]),a("dd",[a("div",{staticClass:"text-box"},[r._v(r._s(e.logisticsName))])])]),a("dl",[a("dt",[r._v("快递单号：")]),a("dd",[a("div",{staticClass:"text-box",attrs:{nctype:"ordersSn"}},[r._v(r._s(e.logisticsNo))])])]),a("div",{staticClass:"div-express-log"},[a("ul",{staticClass:"express-log express-log-name"},r._l(e.orderPackageItemList,function(e,t){return a("li",{key:t},[a("span",{staticClass:"time",staticStyle:{width:"50%"}},[a("span",[r._v("商品名称：")]),a("span",[r._v(r._s(e.goodsName))])]),a("span",{staticClass:"time",staticStyle:{width:"30%"}},[a("span",[r._v("发货时间：")]),a("span",[r._v(r._s(e.logisticsTime))])]),a("span",{staticClass:"time",staticStyle:{width:"20%"}},[a("span",[r._v("发货数量：")]),a("span",[r._v(r._s(e.deliverNumber))])])])}),0),a("div",{staticClass:"div-express-log",staticStyle:{overflow:"hidden"}},[e.traces&&e.traces.traces?a("ul",{staticClass:"express-log"},r._l(e.traces.traces,function(e,t){return a("li",{key:t},[a("span",{staticClass:"time"},[r._v(r._s(e.AcceptTime||e.acceptTime))]),a("span",{staticClass:"detail"},[r._v(r._s(e.AcceptStation||e.remark))])])}),0):a("ul",{staticClass:"express-log"},[a("li",[r._v("暂无物流信息")])])])])])]):r._e()}),0==r.orderPackage.length&&r.logistics?a("div",[a("div",{staticClass:"layui-layer-wrap"},[a("dl",[a("dt",[r._v("物流公司：")]),a("dd",[a("div",{staticClass:"text-box"},[r._v(r._s(r.logistics.shipper))])])]),a("dl",[a("dt",[r._v("快递单号：")]),a("dd",[a("div",{staticClass:"text-box",attrs:{nctype:"ordersSn"}},[r._v(r._s(r.logistics.logisticCode))])])]),a("div",{staticClass:"div-express-log"},[r.logistics&&r.logistics.traces?a("ul",{staticClass:"express-log"},r._l(r.logistics.traces,function(e,t){return a("li",{key:t},[a("span",{staticClass:"time"},[r._v(r._s(e.AcceptTime))]),a("span",{staticClass:"detail"},[r._v(r._s(e.AcceptStation))])])}),0):a("ul",{staticClass:"express-log"},[a("li",[r._v("暂无物流信息")])])])])]):r._e(),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){r.logisticsModal=!1}}},[r._v("取消")])],1)],2)],1):r._e()},[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{attrs:{width:"30%"}},[e._v("商品")]),t("th",{attrs:{width:"15%"}},[e._v("货号")]),t("th",{attrs:{width:"10%"}},[e._v("单价")]),t("th",{attrs:{width:"5%"}},[e._v("数量")]),t("th",{attrs:{width:"10%"}},[e._v("退款状态")]),t("th",{attrs:{width:"10%"}},[e._v("实际退款金额")]),t("th",{attrs:{width:"10%"}},[e._v("小计")]),t("th",{attrs:{width:"10%"}},[e._v("操作")])])])}],!1,null,"003d05cd",null);t.default=s.exports}}]);