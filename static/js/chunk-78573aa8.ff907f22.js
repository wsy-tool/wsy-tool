(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-78573aa8"],{1390:function(t,e,s){s("47b4")},"30ee":function(t,e,s){s("3ae3")},"3ae3":function(t,e,s){},"3cdb":function(t,e,s){s("628f")},"47b4":function(t,e,s){},"628f":function(t,e,s){},7861:function(t,e,s){var i={props:{time:{default:1718977559428},type:{default:"goodsDetail",type:String}},data(){return{end:"",hours:"",minutes:"",seconds:"",interval:""}},mounted(){this.init()},methods:{countDown(t){function e(t){return t<10?"0"+t:t+""}var s=new Date,t=new Date(t),t=parseInt((t.getTime()-s.getTime())/1e3),s=parseInt(t/3600%24),i=parseInt(t/60%60),a=parseInt(t%60),s=e(s),i=e(i),a=e(a);this.hours=s,this.minutes=i,this.seconds=a,t<=0&&(this.end="活动已结束",clearInterval(this.interval))},init(){this.interval=setInterval(()=>{this.countDown(this.time)},1e3)}}},s=(s("1390"),s("2877")),s=Object(s.a)(i,function(){var t=this,e=t._self._c;return e("div",["goodsDetail"===t.type?e("div",{staticClass:"wrapper"},[e("div",{staticClass:"wr-l"},[e("Icon",{attrs:{size:"23",type:"ios-alarm-outline"}}),t._v(" 秒杀活动")],1),""===t.end?e("div",{staticClass:"count-down"},[e("p",[t._v("倒计时：")]),e("span",[t._v(t._s(t.hours))]),e("span",[t._v(t._s(t.minutes))]),e("span",[t._v(t._s(t.seconds))])]):e("div",[t._v(t._s(t.end))])]):e("span",{staticClass:"cart-promotion"},[""===t.end?e("span",[t._v("距活动结束："),e("span",[t._v(t._s(t.hours))]),t._v(" : "),e("span",[t._v(t._s(t.minutes))]),t._v(" : "),e("span",[t._v(t._s(t.seconds))])]):e("span",[t._v("活动已结束")])])])},[],!1,null,"d6d9a094",null);e.a=s.exports},"7ded":function(t,e,s){s.d(e,"e",function(){return a}),s.d(e,"c",function(){return o}),s.d(e,"h",function(){return n}),s.d(e,"a",function(){return r}),s.d(e,"j",function(){return c}),s.d(e,"d",function(){return l}),s.d(e,"i",function(){return d}),s.d(e,"f",function(){return u}),s.d(e,"b",function(){return m}),s.d(e,"g",function(){return p});var i=s("ff66");function a(t){return Object(i.d)({url:"/buyer/passport/member/register",method:i.a.POST,needToken:!1,data:t})}function o(t){return Object(i.d)({url:"/buyer/passport/member/userLogin",method:i.a.POST,needToken:!1,data:t,headers:{clientType:"PC"}})}function n(t){return Object(i.d)({url:"/buyer/passport/member/smsLogin",method:i.a.POST,needToken:!1,data:t,headers:{clientType:"PC"}})}function r(t){return Object(i.d)({url:"/buyer/passport/member",method:i.a.GET,needToken:!0,params:t})}function c(t){window.open(i.b+"/buyer/passport/connect/connect/login/web/"+t,"blank")}function l(t){return Object(i.d)({url:"/buyer/passport/connect/connect/result?state="+t,method:i.a.GET,needToken:!1})}function d(t){return Object(i.d)({url:"/buyer/passport/member/resetByMobile",method:i.a.POST,needToken:!1,params:t})}function u(t){return Object(i.d)({url:"/buyer/passport/member/resetPassword",method:i.a.POST,needToken:!1,params:t})}function m(t){return Object(i.d)({url:"/buyer/passport/member/pc_session",method:i.a.POST,needToken:!1,params:t})}function p(t,e){return Object(i.d)({url:"/buyer/passport/member/session_login/"+t,method:i.a.POST,needToken:!1,params:e})}},"84a9":function(t,e,s){s.d(e,"b",function(){return a}),s.d(e,"c",function(){return o}),s.d(e,"e",function(){return n}),s.d(e,"g",function(){return r}),s.d(e,"f",function(){return c}),s.d(e,"a",function(){return l}),s.d(e,"d",function(){return d}),s.d(e,"h",function(){return u});var i=s("ff66");function a(t){return Object(i.d)({url:"/buyer/store/store/apply/first",needToken:!0,method:i.a.PUT,params:t})}function o(t){return Object(i.d)({url:"/buyer/store/store/apply/second",needToken:!0,method:i.a.PUT,params:t})}function n(t){return Object(i.d)({url:"/buyer/store/store/apply/third",needToken:!0,method:i.a.PUT,params:t})}function r(t){return Object(i.d)({url:"/buyer/store/store/get/detail/"+t,needToken:!0,method:i.a.GET})}function c(t){return Object(i.d)({url:"/buyer/store/store/label/get/"+t,needToken:!0,method:i.a.GET})}function l(){return Object(i.d)({url:"/buyer/other/article/type/STORE_REGISTER",needToken:!0,method:i.a.GET})}function d(){return Object(i.d)({url:"/buyer/store/store/apply",needToken:!0,method:i.a.GET})}function u(t,e){return Object(i.d)({url:"/buyer/store/address/page/"+t,method:i.a.GET,params:e})}},"8d4c":function(t,e,s){s("cd85")},c2bd:function(t,e,s){s.r(e);var i=s("c106"),a=s("7861"),o=s("86bd"),n=s("f7a5"),r=s.n(n),c=s("8194"),l=s("2166"),n={name:"ShowGoods",props:{detail:{type:Object,default:null}},watch:{detail:{handler(t){this.skuDetail=t.data,this.wholesaleList=t.wholesaleList,this.wholesaleList&&0<this.wholesaleList.length&&(this.count=this.wholesaleList[0].num),this.promotion(),this.swiperGoodsImg()},deep:!0,immediate:!0},showGoodsVideo(t){t&&this.initVideo()}},data(){return{showGoodsVideo:!1,goodsVideo:"",wholesaleList:[],count:1,imgIndex:0,currentSelceted:[],imgList:[],skuDetail:{specList:[]},goodsSpecList:this.detail.specs,promotionMap:{SECKILL:null,FULL_DISCOUNT:null,COUPON:[]},formatList:[],loading:!1,loading1:!1,isCollected:!1}},components:{PicZoom:o.a,Promotion:a.a},computed:{wholesalePrice(t){return this.wholesaleList.length?this.wholesaleList.map(t=>t.price):[]},wholesaleNum(t){return this.wholesaleList.length?this.wholesaleList.map(t=>t.num):[]}},methods:{initVideo(){this.goodsVideo||setTimeout(()=>{this.goodsVideo=new r.a({container:document.getElementById("dplayer"),video:{url:this.skuDetail.goodsVideo}})},100)},changeCount(t){this.wholesaleList&&0<this.wholesaleList.length&&this.count<=this.wholesaleList[0].num&&(this.$Message.warning("批发商品购买数量不能小于起批数量"),this.count=this.wholesaleList[0].num)},select(t,e){this.$set(this.currentSelceted,t,e);t=this.goodsSpecList.find(t=>{let e=!0,s=t.specValues.filter(t=>"images"!==t.specName);for(let t=0;t<s.length;t++)if(s[t].specValue!==this.currentSelceted[t])return void(e=!1);if(e)return t});this.$emit("handleClickSku",{skuId:t.skuId,goodsId:this.skuDetail.goodsId})},addShoppingCartBtn(){var t={num:this.count,skuId:this.skuDetail.id};this.loading=!0,Object(l.a)(t).then(t=>{this.loading=!1,t.success?this.$router.push({path:"/shoppingCart",query:{detail:this.skuDetail,count:this.count}}):this.$Message.warning(t.message)}).catch(()=>{this.loading=!1})},buyNow(){let e={num:this.count,skuId:this.skuDetail.id,cartType:"BUY_NOW"};"VIRTUAL_GOODS"===this.skuDetail.goodsType&&(e.cartType="VIRTUAL"),this.loading1=!0,Object(l.a)(e).then(t=>{this.loading1=!1,t.success?this.$router.push({path:"/pay",query:{way:e.cartType}}):this.$Message.warning(t.message)}).catch(()=>{this.loading1=!1})},async collect(){this.isCollected?(await Object(c.k)("GOODS",this.skuDetail.id)).success&&(this.$Message.success("取消收藏成功"),this.isCollected=!1):200===(await Object(c.p)("GOODS",this.skuDetail.id)).code&&(this.isCollected=!0,this.$Message.success("收藏商品成功,可以前往个人中心我的收藏查看"))},formatSku(t){let o=[{}];t.forEach((a,t)=>{a.specValues.forEach((t,e)=>{let s=t.specName,i={value:t.specValue,quantity:a.quantity};"images"!==s&&o.forEach((t,e)=>{t.name===s&&t.values&&!t.values.find(t=>t.value===i.value)&&t.values.push(i),o.map(t=>t.name).includes(s)||o.push({name:s,values:[i]})})})}),o.shift(),this.formatList=o;var e=t.filter(t=>t.skuId===this.$route.query.skuId)[0];e&&e.specValues.filter(t=>"images"!==t.specName).forEach((t,e)=>{this.currentSelceted[e]=t.specValue}),this.skuList=t},receiveCoupon(t){Object(c.Q)(t).then(t=>{t.success?this.$Message.success("优惠券领取成功"):this.$Message.warning(t.message)})},promotion(){if(this.promotionMap={SECKILL:null,FULL_DISCOUNT:null,COUPON:[]},!this.detail.promotionMap)return!1;var e=Object.keys(this.detail.promotionMap);if(0===e.length)return!1;for(let t=0;t<e.length;t++){var s=e[t].split("-")[0];"COUPON"===s?this.promotionMap[s].push(this.detail.promotionMap[e[t]]):this.promotionMap[s]=this.detail.promotionMap[e[t]]}},swiperGoodsImg(){this.skuDetail.specList.forEach(t=>{"images"===t.specName&&(this.imgList=this.skuDetail.goodsGalleryList.filter(t=>-1===t.indexOf('"url":')&&-1===t.indexOf('"status":')))}),this.imgList||(this.imgList=[this.skuDetail.original])}},mounted(){this.Cookies.getItem("userInfo")&&Object(c.J)("GOODS",this.skuDetail.id).then(t=>{t.success&&t.result&&(this.isCollected=!0)}),this.formatSku(this.goodsSpecList),document.title=this.skuDetail.goodsName}},o=(s("8d4c"),s("2877")),a=Object(o.a)(n,function(){var i=this,a=i._self._c;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"item-detail-show"},[a("div",{staticClass:"item-detail-left"},[i.imgList[i.imgIndex]?a("div",{staticClass:"item-detail-big-img"},[a("pic-zoom",{attrs:{url:i.imgList[i.imgIndex].url||i.imgList[i.imgIndex],scale:2}})],1):i._e(),a("div",{staticClass:"item-detail-img-row"},i._l(i.imgList,function(t,e){return a("div",{key:e,staticClass:"item-detail-img-small",on:{mouseover:function(t){i.imgIndex=e}}},[a("img",{attrs:{src:t.url||t}})])}),0),a("div",{staticClass:"goodsConfig mt_10"},[a("span",{on:{click:i.collect}},[a("Icon",{attrs:{type:"ios-heart",color:i.isCollected?"#ed3f14":"#666"}}),i._v(i._s(i.isCollected?"已收藏":"收藏"))],1)])]),a("div",{staticClass:"item-detail-right"},[a("div",{staticClass:"item-detail-title"},[a("p",[i._v(" "+i._s(i.skuDetail.goodsName)+" "),"VIRTUAL_GOODS"!==i.skuDetail.goodsType?a("Tag",{staticStyle:{"margin-top":"10px"}},[i._v(" 实物商品 ")]):"VIRTUAL_GOODS"==i.skuDetail.goodsType?a("Tag",{staticStyle:{"margin-top":"10px"}},[i._v(" 虚拟商品 ")]):i._e()],1)]),a("div",{staticClass:"sell-point"},[i._v(" "+i._s(i.skuDetail.sellingPoint)+" ")]),i.promotionMap.SECKILL?a("Promotion",{attrs:{time:i.promotionMap.SECKILL.endTime}}):i._e(),a("div",{staticClass:"item-detail-price-row"},[a("div",{staticClass:"item-price-left"},[i.skuDetail.promotionPrice&&i.promotionMap.SECKILL?a("div",{staticClass:"item-price-row"},[a("p",[i.promotionMap.SECKILL?a("span",{staticClass:"item-price-title"},[i._v("秒  杀 价")]):i._e(),a("span",{staticClass:"item-price"},[i._v(i._s(i._f("unitPrice")(i.skuDetail.promotionPrice,"￥")))]),a("span",{staticClass:"item-price-old"},[i._v(i._s(i._f("unitPrice")(i.skuDetail.price,"￥")))])])]):a("div",{staticClass:"item-price-row"},[i.wholesaleNum&&i.wholesaleNum.length?a("div",[a("div",{staticClass:"flex"},[a("div",{staticClass:"item-price-title"},[i._v(" 价     格 ")]),i._l(i.wholesalePrice,function(t,e){return a("div",{key:e,staticClass:"item-price item-num"},[i._v(" "+i._s(i._f("unitPrice")(t,"￥"))+" ")])})],2),a("div",{staticClass:"flex"},[a("div",{staticClass:"item-price-title"},[i._v("起 批 量")]),i._l(i.wholesaleNum,function(t,e){return a("div",{key:e,staticClass:"item-num item-price-num"},[i._v(" "+i._s(t)+i._s(i.skuDetail.goodsUnit)+" ")])})],2)]):a("div",[a("span",{staticClass:"item-price-title"},[i._v("价     格")]),a("span",{staticClass:"item-price"},[i._v(i._s(i._f("unitPrice")(i.skuDetail.price,"￥")))])])]),i.promotionMap.COUPON.length?a("div",{staticClass:"item-price-coupon-row"},[a("p",{staticClass:"Ellipsis"},[a("span",{staticClass:"item-price-title"},[i._v("优 惠 券")]),a("span",i._l(i.promotionMap.COUPON.slice(0,6),function(e,t){return a("span",{key:t,staticClass:"item-coupon",on:{click:function(t){return i.receiveCoupon(e.id)}}},["PRICE"==e.couponType?a("span",[i._v("满"+i._s(e.consumeThreshold)+"减"+i._s(e.price))]):i._e(),"DISCOUNT"==e.couponType?a("span",[i._v("满"+i._s(e.consumeThreshold)+"打"+i._s(e.couponDiscount)+"折")]):i._e()])}),0)]),6<i.promotionMap.COUPON.length?a("div",{staticClass:"dropdown"},[a("span",[i._v("展开更多")]),a("div",{staticClass:"dropdown-content"},i._l(i.promotionMap.COUPON.slice(6,i.promotionMap.COUPON.length),function(e,t){return a("span",{key:t,staticClass:"item-coupon",on:{click:function(t){return i.receiveCoupon(e.id)}}},["PRICE"==e.couponType?a("span",[i._v("满"+i._s(e.consumeThreshold)+"减"+i._s(e.price))]):i._e(),"DISCOUNT"==e.couponType?a("span",[i._v("满"+i._s(e.consumeThreshold)+"打"+i._s(e.couponDiscount)+"折")]):i._e()])}),0)]):i._e(),a("p")]):i._e(),i.promotionMap.FULL_DISCOUNT?a("div",{staticClass:"item-price-row"},[a("p",[a("span",{staticClass:"item-price-title"},[i._v("促     销")]),a("span",{staticClass:"item-promotion"},[i._v("满减")]),i.promotionMap.FULL_DISCOUNT.fullMinus?a("span",{staticClass:"item-desc-pintuan"},[i._v("满"+i._s(i.promotionMap.FULL_DISCOUNT.fullMoney)+"元，立减现金"+i._s(i.promotionMap.FULL_DISCOUNT.fullMinus)+"元")]):i._e(),i.promotionMap.FULL_DISCOUNT.fullRate&&i.promotionMap.FULL_DISCOUNT.fullRateFlag?a("span",{staticClass:"item-desc-pintuan"},[i._v("满"+i._s(i.promotionMap.FULL_DISCOUNT.fullMoney)+"元，立享"+i._s(i.promotionMap.FULL_DISCOUNT.fullRate)+"折")]):i._e()])]):i._e()]),a("div",{staticClass:"item-price-right"},[a("div",{staticClass:"item-remarks-sum"},[a("p",[i._v("累计评价")]),a("p",[a("span",{staticClass:"item-remarks-num"},[i._v(i._s(i.skuDetail.commentNum||0)+" 条")])])])])]),i._l(i.formatList,function(t,s){return a("div",{key:t.name,staticClass:"item-select"},[a("div",{staticClass:"item-select-title"},[a("p",[i._v(i._s(t.name))])]),a("div",{staticClass:"item-select-column"},i._l(t.values,function(e){return a("div",{key:e.value,staticClass:"item-select-row"},[a("div",{staticClass:"item-select-box",class:{"item-select-box-active":e.value===i.currentSelceted[s]},on:{click:function(t){return i.select(s,e.value)}}},[a("div",{staticClass:"item-select-intro"},[a("p",[i._v(i._s(e.value))])])])])}),0)])}),a("br"),a("div",{staticClass:"add-buy-car-box"},[a("div",{staticClass:"item-select"},[i._m(0),a("div",{staticClass:"item-select-row"},[a("InputNumber",{attrs:{min:1,max:i.skuDetail.quantity,disabled:0===i.skuDetail.quantity,precision:.1},on:{"on-blur":i.changeCount},model:{value:i.count,callback:function(t){i.count=t},expression:"count"}}),a("span",{staticClass:"inventory"},[i._v(" 库存"+i._s(i.skuDetail.quantity))])],1)]),"VIRTUAL_GOODS"!==i.skuDetail.goodsType&&0!==i.skuDetail.weight?a("div",{staticClass:"item-select"},[i._m(1),a("div",{staticClass:"item-select-row"},[a("span",{staticClass:"inventory"},[i._v(" "+i._s(i.skuDetail.weight)+"kg")])])]):i._e(),"POINT"===i.$route.query.way&&"PASS"===i.skuDetail.authFlag?a("div",{staticClass:"add-buy-car"},[a("Button",{attrs:{type:"error",loading:i.loading,disabled:0===i.skuDetail.quantity},on:{click:i.pointPay}},[i._v("积分购买")])],1):i._e(),"POINT"!==i.$route.query.way&&"PASS"===i.skuDetail.authFlag?a("div",{staticClass:"add-buy-car"},["VIRTUAL_GOODS"!==i.skuDetail.goodsType?a("Button",{attrs:{type:"error",loading:i.loading,disabled:0===i.skuDetail.quantity},on:{click:i.addShoppingCartBtn}},[i._v("加入购物车")]):i._e(),a("Button",{attrs:{type:"warning",loading:i.loading1,disabled:0===i.skuDetail.quantity},on:{click:i.buyNow}},[i._v("立即购买")]),i.skuDetail.goodsVideo?a("Tooltip",{attrs:{content:"观看视频"}},[a("img",{staticClass:"view-video",attrs:{src:s("dada"),alt:""},on:{click:function(t){i.showGoodsVideo=!0}}})]):i._e()],1):i._e()])],2),a("Modal",{attrs:{title:"浏览视频"},model:{value:i.showGoodsVideo,callback:function(t){i.showGoodsVideo=t},expression:"showGoodsVideo"}},[a("div",{attrs:{id:"dplayer"}})])],1)])},[function(){var t=this._self._c;return t("div",{staticClass:"item-select-title"},[t("p",[this._v("数量")])])},function(){var t=this._self._c;return t("div",{staticClass:"item-select-title"},[t("p",[this._v("重量")])])}],!1,null,"1fa36584",null).exports,n=s("cea8"),d={name:"ShowGoodsDetail",props:{detail:{type:Object,default:null}},data(){return{commentList:[],commentParams:{pageNumber:1,pageSize:10,grade:"",goodsId:""},commentTypeNum:{},commentTotal:0,onceFlag:!0}},computed:{skuDetail(){return this.detail.data}},methods:{changeHeight(t){let e=window.getComputedStyle(this.$refs[t]).height;e=parseInt(e.substr(0,e.length-2))+89,this.$refs.itemIntroDetail.style.height=e+"px"},changePageNum(t){this.commentParams.pageNumber=t,this.getList()},changePageSize(t){this.commentParams.pageNumber=1,this.commentParams.pageSize=t,this.getList()},getList(){this.commentParams.goodsId=this.skuDetail.goodsId,Object(c.G)(this.commentParams).then(t=>{t.success&&(this.commentList=t.result.records,this.commentTotal=t.result.total)}),Object(c.H)(this.skuDetail.goodsId).then(t=>{t.success&&(this.commentTypeNum=t.result)})},viewByGrade(t){this.$set(this.commentParams,"grade",t),this.commentParams.pageNumber=1,this.getList()},tabClick(t){0===t?this.$nextTick(()=>{this.changeHeight("itemIntroGoods")}):this.$nextTick(()=>{this.changeHeight("itemGoodsComment")})},previewImg(t,e){this.$set(e,"previewImg",t),this.$nextTick(()=>{this.changeHeight("itemGoodsComment")})},hidePreviewImg(t){this.$set(t,"previewImg",""),this.$nextTick(()=>{this.changeHeight("itemGoodsComment")})},rotatePreviewImg(t,e){t?e.deg?this.$set(e,"deg",e.deg+90):this.$set(e,"deg",90):e.deg?this.$set(e,"deg",e.deg-90):this.$set(e,"deg",-90)},handleScroll(){this.onceFlag&&(this.$nextTick(()=>{this.changeHeight("itemIntroGoods")}),this.onceFlag=!1)}},mounted(){this.$nextTick(()=>{setTimeout(this.changeHeight("itemIntroGoods"),2e3)}),window.addEventListener("scroll",this.handleScroll),this.getList(),null==this.skuDetail.grade&&(this.skuDetail.grade=100)}};s("30ee");var d=Object(o.a)(d,function(){var i=this,a=i._self._c;return a("div",{staticStyle:{height:"auto"}},[a("div",{staticClass:"item-intro-show"},[a("div",{ref:"itemIntroDetail",staticClass:"item-intro-detail"},[a("div",{staticClass:"item-intro-nav item-tabs"},[a("Tabs",{attrs:{animated:!1},on:{"on-click":i.tabClick}},[a("TabPane",{attrs:{label:"商品介绍"}},[a("div",{ref:"itemIntroGoods",staticClass:"item-intro-img"},[i.skuDetail.intro?a("div",{staticClass:"item-intro",domProps:{innerHTML:i._s(i.skuDetail.intro)}}):a("div",{staticStyle:{margin:"20px"}},[i._v("暂无商品介绍")])])]),a("TabPane",{attrs:{label:"商品评价"}},[a("div",{ref:"itemGoodsComment",staticClass:"remarks-container"},[a("div",{staticClass:"remarks-analyse-box"},[a("div",{staticClass:"remarks-analyse-goods"},[a("i-circle",{attrs:{percent:i.skuDetail.grade,"stroke-color":"#5cb85c"}},[a("span",{staticClass:"remarks-analyse-num"},[i._v(i._s(i.skuDetail.grade)+"%")]),a("p",{staticClass:"remarks-analyse-title"},[i._v("好评率")])])],1)]),a("div",{staticClass:"remarks-bar"},[a("span",{class:{selectedBar:""===i.commentParams.grade},on:{click:function(t){return i.viewByGrade("")}}},[i._v("全部("+i._s(i.commentTypeNum.all)+")")]),a("span",{class:{selectedBar:"GOOD"===i.commentParams.grade},on:{click:function(t){return i.viewByGrade("GOOD")}}},[i._v("好评("+i._s(i.commentTypeNum.good)+")")]),a("span",{class:{selectedBar:"MODERATE"===i.commentParams.grade},on:{click:function(t){return i.viewByGrade("MODERATE")}}},[i._v("中评("+i._s(i.commentTypeNum.moderate)+")")]),a("span",{class:{selectedBar:"WORSE"===i.commentParams.grade},on:{click:function(t){return i.viewByGrade("WORSE")}}},[i._v("差评("+i._s(i.commentTypeNum.worse)+")")])]),0===i.commentList.length?a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[i._v(" 暂无评价数据 ")]):i._l(i.commentList,function(s,t){return a("div",{key:t,staticClass:"remarks-box"},[a("div",{staticClass:"remarks-user"},[a("Avatar",{attrs:{src:s.memberProfile}}),a("span",{staticClass:"remarks-user-name"},[i._v(i._s(i._f("secrecyMobile")(s.memberName)))])],1),a("div",{staticClass:"remarks-content-box"},[a("p",[a("Rate",{staticClass:"remarks-star",attrs:{disabled:"",value:Number(s.descriptionScore),"allow-half":""}})],1),a("p",{staticClass:"remarks-content"},[i._v(i._s(s.content))]),s.images?a("div",{staticClass:"comment-img"},i._l(s.images.split(","),function(e,t){return a("div",{key:t,class:{borderColor:e===s.previewImg},on:{click:function(t){return i.previewImg(e,s)}}},[a("img",{attrs:{src:e,alt:""}})])}),0):i._e(),s.previewImg?a("div",{staticClass:"preview-img",on:{click:function(t){return t.preventDefault(),i.hidePreviewImg(s)}}},[a("div",[a("span",{on:{click:function(t){return t.stopPropagation(),i.rotatePreviewImg(0,s)}}},[a("Icon",{attrs:{type:"md-refresh"}}),i._v("左转")],1),a("span",{on:{click:function(t){return t.stopPropagation(),i.rotatePreviewImg(1,s)}}},[a("Icon",{attrs:{type:"md-refresh"}}),i._v("右转")],1)]),a("img",{style:{transform:`rotate(${s.deg}deg)`},attrs:{src:s.previewImg,width:"198",alt:""}})]):i._e(),a("p",{staticClass:"remarks-sub"},[a("span",{staticClass:"remarks-item"},[i._v(i._s(s.goodsName))]),a("span",{staticClass:"remarks-time"},[i._v(i._s(s.createTime))])]),s.reply?a("div",{staticClass:"reply"},[a("p",[i._v("商家回复")]),a("div",[a("p",{staticClass:"remarks-content"},[i._v(i._s(s.reply))]),a("div",[s.replyImage?a("div",{staticClass:"comment-img"},i._l(s.replyImage.split(","),function(e,t){return a("div",{key:t,on:{click:function(t){return i.$previewImage(e)}}},[a("img",{attrs:{src:e,alt:""}})])}),0):i._e()])])]):i._e()])])}),a("div",{staticClass:"remarks-page"},[a("Page",{attrs:{total:i.commentTotal,size:"small","page-size":i.commentParams.pageSize},on:{"on-change":i.changePageNum,"on-page-size-change":i.changePageSize}})],1)],2)]),a("TabPane",{attrs:{label:"商品参数"}},[i.detail.goodsParamsDTOList&&i.detail.goodsParamsDTOList.length?i._l(i.detail.goodsParamsDTOList,function(t){return a("div",{key:t.groupId,staticClass:"goods-params",staticStyle:{height:"inherit"}},[a("span",{staticClass:"ml_10"},[i._v(i._s(t.groupName))]),a("table",{staticClass:"mb_10",attrs:{cellpadding:"0",cellspacing:"0"}},i._l(t.goodsParamsItemDTOList,function(t){return a("tr",{key:t.paramId},[a("td",{staticStyle:{"text-align":"center"}},[i._v(i._s(t.paramName))]),a("td",[i._v(i._s(t.paramValue))])])}),0)])}):a("div",[i._v("暂无商品参数")])],2)],1)],1)])])])},[],!1,null,"42b093aa",null).exports,u=s("c40e"),m=s("84a9"),i={name:"GoodsDetail",beforeRouteEnter(t,e,s){window.scrollTo(0,0),s()},created(){this.getGoodsDetail()},mixins:[s("def3").a],data(){return{goodsMsg:{},isLoading:!1,categoryBar:[],storeCollected:!1,storeMsg:{},takeDownSale:!1}},methods:{target(t){this.$router.push({path:t})},targetClickSku(t){this.getGoodsDetail(t)},getGoodsDetail(t){this.isLoading=!0;var t=t||this.$route.query,e=t&&t.distributionId?t.distributionId:this.Cookies.getItem("distributionId");if(e){this.Cookies.setItem("distributionId",t.distributionId);let e=this;Object(c.C)(t.distributionId).then(t=>{t.success&&e.Cookies.removeItem("distributionId")})}Object(u.d)(t).then(a=>{if(this.isLoading=!1,a.success){let t=a.result,s=a.result.categoryName,e=t.data.categoryPath.split(","),i=[];e.forEach((t,e)=>{i.push({id:t,name:s?s[e]:""})}),this.categoryBar=i,this.$set(this,"goodsMsg",a.result),this.goodsMsg.data.intro||(this.goodsMsg.data.intro=""),this.Cookies.getItem("userInfo")&&Object(c.K)("STORE",this.goodsMsg.data.storeId).then(t=>{t.success&&t.result&&(this.storeCollected=!0)}),this.storeMsg||Object(m.g)(this.goodsMsg.data.storeId).then(t=>{t.success&&(this.storeMsg=t.result)})}else this.$Message.error(a.message),this.isLoading=!1}).catch(t=>{this.isLoading=!1,11001===t.code&&(this.takeDownSale=!0)})},goGoodsList(s){let i=[];return this.categoryBar.forEach((t,e)=>{e<=s&&i.push(t.id)}),location.origin+"/goodsList?categoryId="+i.toString()},async collect(){this.storeCollected?(await Object(c.l)("STORE",this.goodsMsg.data.storeId)).success&&(this.$Message.success("已取消收藏"),this.storeCollected=!1):200===(await Object(c.r)("STORE",this.goodsMsg.data.storeId)).code&&(this.storeCollected=!0,this.$Message.success("收藏店铺成功,可以前往个人中心我的收藏查看"))}},watch:{},components:{Search:i.a,ShowGoods:a,ShowGoodsDetail:d,empty:n.a}},a=(s("3cdb"),Object(o.a)(i,function(){var s=this,i=s._self._c;return i("div",{staticStyle:{background:"#fff"}},[i("BaseHeader"),i("Search"),i("div",{staticClass:"shop-item-path"},[i("div",{staticClass:"shop-nav-container"},[i("Breadcrumb",[i("BreadcrumbItem",{attrs:{to:"/"}},[s._v("首页")]),s._l(s.categoryBar,function(t,e){return i("BreadcrumbItem",{key:e,attrs:{to:s.goGoodsList(e),target:"_blank"}},[s._v(" "+s._s(t.name)+" ")])})],2),s.takeDownSale?s._e():i("div",{staticClass:"store-collect"},[s.goodsMsg.data?i("span",{staticClass:"mr_10"},[i("router-link",{attrs:{to:"Merchant?id="+s.goodsMsg.data.storeId}},[s._v(s._s(s.goodsMsg.data.storeName))])],1):s._e(),i("span",{on:{click:s.collect}},[i("Icon",{attrs:{type:"ios-heart",color:s.storeCollected?"#ed3f14":"#666"}}),s._v(" "+s._s(s.storeCollected?"已收藏店铺":"收藏店铺")+" ")],1),i("span",{staticClass:"ml_10",on:{click:function(t){return s.IMService(s.goodsMsg.data.storeId,s.goodsMsg.data.goodsId,s.goodsMsg.data.id)}}},[s._v("联系客服")])])],1)]),s.goodsMsg.data?i("ShowGoods",{attrs:{detail:s.goodsMsg},on:{handleClickSku:s.targetClickSku}}):s._e(),s.goodsMsg.data?i("ShowGoodsDetail",{attrs:{detail:s.goodsMsg}}):s._e(),s.takeDownSale?i("empty",{attrs:{_Title:"当前商品已下架"}},[i("div",{staticClass:"sale-btn"},[i("Button",{staticClass:"mr_10",attrs:{size:"small"},on:{click:function(t){return s.target("/")}}},[s._v("返回首页")]),i("Button",{attrs:{size:"small"},on:{click:function(t){return s.target("goodsList")}}},[s._v("返回商品列表")])],1)]):s._e(),s.isLoading?i("Spin",{attrs:{size:"large",fix:""}}):s._e(),i("BaseFooter")],1)},[],!1,null,"4c45827d",null));e.default=a.exports},cd85:function(t,e,s){},dada:function(t,e,s){t.exports=s.p+"static/img/play.dd2b1421.svg"},def3:function(t,e,s){var i=s("2934"),o=s("e487"),n=s("7ded"),a={data(){return{Storage:o.a,IMLink:""}},methods:{async IMService(t,e,s){var i=o.a.getItem("accessToken"),a=(await this.getIMDetailMethods(),await Object(n.a)());a.success?e&&s?window.open(this.IMLink+"?token="+i+"&id="+t||this.storeMsg.storeId+"&goodsId="+e+"&skuId="+s):window.open(this.IMLink+"?token="+i+"&id="+t||this.storeMsg.storeId):this.$Message.error("请登录后再联系客服")},async getIMDetailMethods(){var t=await Object(i.e)();t.success&&(this.IMLink=t.result)}}},s=s("2877"),s=Object(s.a)(a,function(){return(0,this._self._c)("div")},[],!1,null,"588e26a1",null);e.a=s.exports}}]);