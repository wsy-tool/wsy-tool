(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b4222c02"],{3932:function(t,e,s){s("9559")},"7dfd":function(t,e,s){s.r(e),s.d(e,"mobile",function(){return a}),s.d(e,"email",function(){return o}),s.d(e,"password",function(){return r}),s.d(e,"integer",function(){return i}),s.d(e,"Integer",function(){return n}),s.d(e,"money",function(){return c}),s.d(e,"TINumber",function(){return l}),s.d(e,"IDCard",function(){return d}),s.d(e,"userName",function(){return u}),s.d(e,"URL",function(){return p}),s.d(e,"TEL",function(){return m}),s.d(e,"licenseNum",function(){return g});let a=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,r=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,i=/^[1-9]\d*$/,n=/^[0-9]\d*$/,c=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,l=/^((\d{6}[0-9A-Z]{9})|([0-9A-Za-z]{2}\d{6}[0-9A-Za-z]{10,12}))$/,d=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,u=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,p=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,m=/0\d{2,3}-\d{7,8}/,g=/(^(?:(?![IOZSV])[\dA-Z]){2}\d{6}(?:(?![IOZSV])[\dA-Z]){10}$)|(^\d{15}$)/},9559:function(t,e,s){},c222:function(t,e,s){s.r(e);var a=s("8194"),o=s("7dfd"),r=(s("a63b"),s("658f")),r={name:"Distribution",components:{vueQr:s.n(r).a},data(){return{config:s("f121"),status:0,applyForm:{},rules:{name:[{required:!0,message:"请输入真实姓名"}],idNumber:[{required:!0,message:"请输入身份证号"},{pattern:o.IDCard,message:"请输入正确的身份证号"}],settlementBankBranchName:[{required:!0,message:"请输入银行开户行",trigger:"blur"}],settlementBankAccountName:[{required:!0,message:"请输入银行开户名",trigger:"blur"}],settlementBankAccountNum:[{required:!0,message:"银行账号不正确",trigger:"blur"}]},tabName:"goodsChecked",result:{},applyLoading:!1,goodsLoading:!1,withdrawApplyModal:!1,withdrawPrice:0,goodsData:{},logData:{},goodsColumns:[{title:"商品名称",slot:"name",width:400},{title:"商品价格",slot:"price"},{title:"佣金",slot:"commission"},{title:"操作",slot:"action",minWidth:120}],logColumns:[{title:"编号",slot:"sn"},{title:"申请时间",slot:"time"},{title:"提现金额",slot:"price"},{title:"提现状态",slot:"status"}],params:{pageNumber:1,pageSize:20,checked:!0},orderParams:{pageNumber:1,pageSize:20},logParams:{pageNumber:1,pageSize:20,sort:"createTime",order:"desc"},qrcode:"",qrcodeH5:"",qrcodeShow:!1,base64Img:"",base64ImgH5:"",goodsNameCurr:""}},mounted(){this.distribution()},methods:{apply(){this.$refs.form.validate(t=>{t&&(this.applyLoading=!0,Object(a.h)(this.applyForm).then(t=>{this.applyLoading=!1,t.success&&(this.$Message.success("申请已提交，请等待管理员审核"),this.status=1)}))})},withdraw(){Object(a.v)({price:this.withdrawPrice}).then(t=>{this.withdrawApplyModal=!1,this.price=0,t.success?(this.$Message.success("申请已提交，请等待审核"),this.distribution(),this.getLog()):this.$Message.error(t.message)})},qrcodeData(t){this.base64Img=t},qrcodeDataH5(t){this.base64ImgH5=t},downloadQrcode(){var t=document.createElement("a"),e=new MouseEvent("click");t.download=this.goodsNameCurr||"photo",t.href=this.base64Img,t.dispatchEvent(e)},downloadQrcodeH5(){var t=document.createElement("a"),e=new MouseEvent("click");t.download=this.goodsNameCurr||"photo",t.href=this.base64ImgH5,t.dispatchEvent(e)},tabPaneChange(t){"goodsChecked"===t?(this.params.checked=!0,this.params.pageNUmber=1,this.getGoodsData()):"goodsUncheck"===t?(this.params.checked=!1,this.getGoodsData()):"log"===t&&(this.logParams.pageNumber=1,this.getLog())},changePage(t){this.params.pageNumber=t,this.getGoodsData()},changePageLog(t){this.logParams.pageNumber=t,this.getLog()},selectGoods(t,e){t={distributionGoodsId:t,checked:e};Object(a.S)(t).then(t=>{t.success&&(this.$Message.success("操作成功！"),this.getGoodsData())})},fenxiao(t){this.qrcode=`${this.config.PC_DOMAIN}/goodsDetail?skuId=${t.skuId}&goodsId=${t.goodsId}&distributionId=`+this.result.id,this.qrcodeH5=this.config.WAP_DOMAIN+`/pages/product/goods?skuId=${t.skuId}&goodsId=${t.goodsId}&distributionId=`+this.result.id,this.goodsNameCurr=t.goodsName,this.qrcodeShow=!0},getGoodsData(){Object(a.B)(this.params).then(t=>{t.success&&(this.goodsData=t.result)})},getLog(){Object(a.w)(this.logParams).then(t=>{t.success&&(this.logData=t.result)})},repaying(){Object(a.h)().then(t=>{this.applyLoading=!1,t.success&&this.$Message.success("申诉已提交，请等待管理员审核")})},distribution(){Object(a.x)().then(t=>{var e;t.result?(this.result=t.result,"PASS"===(e=t.result.distributionStatus)?(this.status=2,this.getGoodsData()):this.status="REFUSE"===e?0:"RETREAT"===e?4:"APPEAL"===e?5:1):t.data.success||22e3!==t.data.code?this.status=0:this.status=3})}}},i=(s("3932"),s("2877")),i=Object(i.a)(r,function(){var s=this,a=s._self._c;return a("div",{staticClass:"wrapper"},[a("card",{attrs:{_Title:"我的分销"}}),0===s.status?a("div",[a("Alert",{attrs:{type:"warning"}},[s._v("分销商申请")]),a("Form",{ref:"form",attrs:{model:s.applyForm,rules:s.rules}},[a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{model:{value:s.applyForm.name,callback:function(t){s.$set(s.applyForm,"name",t)},expression:"applyForm.name"}})],1),a("FormItem",{attrs:{label:"身份证号",prop:"idNumber"}},[a("Input",{model:{value:s.applyForm.idNumber,callback:function(t){s.$set(s.applyForm,"idNumber",t)},expression:"applyForm.idNumber"}})],1),a("FormItem",{attrs:{label:"银行开户行",prop:"settlementBankBranchName"}},[a("Input",{model:{value:s.applyForm.settlementBankBranchName,callback:function(t){s.$set(s.applyForm,"settlementBankBranchName",t)},expression:"applyForm.settlementBankBranchName"}})],1),a("FormItem",{attrs:{label:"银行开户名",prop:"settlementBankAccountName"}},[a("Input",{model:{value:s.applyForm.settlementBankAccountName,callback:function(t){s.$set(s.applyForm,"settlementBankAccountName",t)},expression:"applyForm.settlementBankAccountName"}})],1),a("FormItem",{attrs:{label:"银行账号",prop:"settlementBankAccountNum"}},[a("Input",{model:{value:s.applyForm.settlementBankAccountNum,callback:function(t){s.$set(s.applyForm,"settlementBankAccountNum",t)},expression:"applyForm.settlementBankAccountNum"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",loading:s.applyLoading},on:{click:s.apply}},[s._v("提交申请")])],1)],1)],1):s._e(),1===s.status?a("div",[a("Alert",{attrs:{type:"success"}},[s._v(" 您提交的信息正在审核 "),a("template",{slot:"desc"},[s._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):s._e(),2===s.status?a("div",[s._m(0),a("div",{staticClass:"box"},[a("div",{staticClass:"mb_20 account-price"},[a("span",{staticClass:"subTips"},[s._v("可提现金额：")]),a("span",{staticClass:"fontsize_48 global_color"},[s._v("￥"+s._s(s._f("unitPrice")(s.result.canRebate)))]),a("span",{staticClass:"subTips"},[s._v("冻结金额：")]),a("span",{},[s._v("￥"+s._s(s._f("unitPrice")(s.result.commissionFrozen)))]),a("span",{staticClass:"subTips"},[s._v("返利总金额：")]),a("span",{},[s._v("￥"+s._s(s._f("unitPrice")(s.result.rebateTotal)))]),a("Button",{staticClass:"ml_20",attrs:{type:"primary",size:"small"},on:{click:function(t){s.withdrawApplyModal=!0}}},[s._v("申请提现")])],1)]),a("Tabs",{attrs:{value:s.tabName},on:{"on-click":s.tabPaneChange}},[a("TabPane",{attrs:{label:"已选商品",name:"goodsChecked"}},[a("Table",{attrs:{stripe:"",columns:s.goodsColumns,data:s.goodsData.records},scopedSlots:s._u([{key:"name",fn:function({row:e}){return[a("div",{staticClass:"goods-msg",on:{click:function(t){return s.linkTo(`/goodsDetail?skuId=${e.skuId}&goodsId=`+e.goodsId)}}},[a("img",{staticStyle:{"vertical-align":"top"},attrs:{src:e.thumbnail,width:"60",height:"60",alt:""}}),s._v("  "+s._s(e.goodsName)+" ")])]}},{key:"price",fn:function({row:t}){return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.price)))])]}},{key:"commission",fn:function({row:t}){return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.commission)))])]}},{key:"action",fn:function({row:e}){return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return s.fenxiao(e)}}},[s._v("分销商品")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return s.selectGoods(e.id,!1)}}},[s._v("取消选择")])]}}],null,!1,1142277250)}),a("div",{staticClass:"page-size"},[a("Page",{attrs:{current:s.params.pageNumber,total:s.goodsData.total,"page-size":s.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":s.changePage}})],1)],1),a("TabPane",{attrs:{label:"未选商品",name:"goodsUncheck"}},[a("Table",{attrs:{stripe:"",columns:s.goodsColumns,data:s.goodsData.records},scopedSlots:s._u([{key:"name",fn:function({row:e}){return[a("div",{staticClass:"goods-msg",on:{click:function(t){return s.linkTo(`/goodsDetail?skuId=${e.skuId}&goodsId=`+e.goodsId)}}},[a("img",{staticStyle:{"vertical-align":"top"},attrs:{src:e.thumbnail,width:"60",height:"60",alt:""}}),s._v("  "+s._s(e.goodsName)+" ")])]}},{key:"price",fn:function({row:t}){return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.price)))])]}},{key:"commission",fn:function({row:t}){return[a("span",[s._v(" ￥"+s._s(s._f("unitPrice")(t.commission)))])]}},{key:"action",fn:function({row:e}){return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return s.selectGoods(e.id,!0)}}},[s._v("选择商品")])]}}],null,!1,724206304)}),a("div",{staticClass:"page-size"},[a("Page",{attrs:{current:s.params.pageNumber,total:s.goodsData.total,"page-size":s.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":s.changePage}})],1)],1),a("TabPane",{attrs:{label:"提现记录",name:"log"}},[a("Table",{attrs:{stripe:"",columns:s.logColumns,data:s.logData.records},scopedSlots:s._u([{key:"sn",fn:function({row:t}){return[a("span",[s._v(s._s(t.sn))])]}},{key:"time",fn:function({row:t}){return[a("span",[s._v(s._s(t.createTime))])]}},{key:"price",fn:function({row:t}){return["VIA_AUDITING"==t.distributionCashStatus?a("span",{staticStyle:{color:"green"}},[s._v(" +￥"+s._s(s._f("unitPrice")(t.price)))]):a("span",{staticStyle:{color:"red"}},[s._v(" -￥"+s._s(s._f("unitPrice")(t.price)))])]}},{key:"status",fn:function({row:t}){return[a("span",[s._v(" "+s._s("APPLY"==t.distributionCashStatus?"待处理":"VIA_AUDITING"==t.distributionCashStatus?"通过":"拒绝"))])]}}],null,!1,124371129)}),a("div",{staticClass:"page-size"},[a("Page",{attrs:{current:s.logParams.pageNumber,total:s.logData.total,"page-size":s.logParams.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":s.changePageLog}})],1)],1)],1)],1):s._e(),3===s.status?a("div",[a("Alert",{attrs:{type:"error"}},[s._v(" 分销功能暂未开启 "),a("template",{slot:"desc"},[s._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):s._e(),4===s.status?a("div",[a("Alert",{attrs:{type:"error"}},[s._v(" 您的分销资格已被清退。请联系管理员或进行申诉 "),a("Button",{staticStyle:{"margin-left":"50px"},attrs:{type:"warning"},on:{click:s.repaying}},[s._v("申诉")])],1)],1):s._e(),5===s.status?a("div",[a("Alert",{attrs:{type:"success"}},[s._v(" 您提交的申诉正在审核 "),a("template",{slot:"desc"},[s._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):s._e(),a("Modal",{attrs:{width:"530"},model:{value:s.withdrawApplyModal,callback:function(t){s.withdrawApplyModal=t},expression:"withdrawApplyModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"edit"}}),a("span",[s._v("提现金额")])],1),a("div",[a("Input",{attrs:{size:"large",number:"",maxlength:"9"},model:{value:s.withdrawPrice,callback:function(t){s.withdrawPrice=t},expression:"withdrawPrice"}},[a("span",{attrs:{slot:"append"},slot:"append"},[s._v("元")])])],1),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large"},on:{click:s.withdraw}},[s._v("提现")])],1)]),a("Modal",{attrs:{title:"分销商品",width:"800"},model:{value:s.qrcodeShow,callback:function(t){s.qrcodeShow=t},expression:"qrcodeShow"}},[a("Alert",{attrs:{type:"warning"}},[s._v(" 下载二维码或者复制链接分享商品 ")]),a("div",{staticClass:"qrcode"},[a("div",{staticStyle:{width:"150px",height:"150px",border:"1px solid #eee"}},[a("vue-qr",{attrs:{text:s.qrcode,callback:s.qrcodeData,margin:0,colorDark:"#000",colorLight:"#fff",size:150}}),a("div",{staticClass:"qrcode-platform"},[s._v("PC端")]),a("Button",{staticClass:"download-btn",attrs:{type:"success"},on:{click:s.downloadQrcode}},[s._v("下载二维码")])],1),a("div",{staticStyle:{width:"150px",height:"150px",border:"1px solid #eee"}},[a("vue-qr",{attrs:{text:s.qrcodeH5,callback:s.qrcodeDataH5,margin:0,colorDark:"#000",colorLight:"#fff",size:150}}),a("div",{staticClass:"qrcode-platform"},[s._v("移动应用端")]),a("Button",{staticClass:"download-btn",attrs:{type:"success"},on:{click:s.downloadQrcodeH5}},[s._v("下载二维码")])],1)]),a("div",{staticClass:"mt_10",staticStyle:{"margin-top":"100px"}},[s._v(" 商品链接："),a("Input",{staticStyle:{width:"600px"},model:{value:s.qrcode,callback:function(t){s.qrcode=t},expression:"qrcode"}})],1)],1)],1)},[function(){var t=this._self._c;return t("div",{staticClass:"tips"},[t("p",[this._v("分销下线付款之后会生成分销订单。")]),t("p",[this._v(" 冻结金额：用户提现金额即为冻结金额，审核通过后扣除冻结金额，审核拒绝之后冻结金额返回可提现金额。 ")]),t("p",[this._v("可提现金额：分销订单佣金T+1解冻后可变为可提现金额。")])])}],!1,null,"202251a3",null);e.default=i.exports}}]);